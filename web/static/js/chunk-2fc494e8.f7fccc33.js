(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2fc494e8"],{"07fc":function(e,t,r){"use strict";r.r(t),r("8e6e"),r("ac6a"),r("456d");var n=r("bd86"),a=r("75fc"),i=r("967e"),o=r.n(i),s=(r("96cf"),r("3b8d")),c=(r("7f7f"),r("7514"),r("5a0c")),u=r.n(c),l=(r("34ef"),r("4917"),r("28a5"),r("a481"),r("6b54"),r("2f62")),d=(r("7b0a"),r("d160")),p=r("365c");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(r,!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var v=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(r,!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{props:["select","userInfo"],name:"",watch:{userInfo:function(){this.dataInfo=this.serverToData(Object.assign({},this.dataInfoInit,this.userInfo))}},data:function(){var e={uvalidbegintime:"",uvalidendtime:"",uvalidDateBeg:"",uvalidDateEnd:"",uvalidTimeBeg:"",uvalidTimeEnd:""};return{videoCameraShow:!1,videoWidth:478,videoHeight:300,openVideo:!0,thisCancas:null,thisContext:null,thisVideo:null,paperPic:null,ishasCamera:!0,imgSrc:"",windowWidth:window.innerWidth,percentage:0,listTypeTimeInit:e,oldUvalidendtime:null,modalTitle:$t("routerMenu.addToTheList"),isShow:!1,picUriImg:"",dataInfoInit:m({cardId:null,type:null,name:null,sex:null,nation:null,cardType:null,cardNum:null,birthDate:null,phone:null,nativePlace:null,address:null,meno:null,listType:null,temporaryStartTime:null,temporaryEndTime:null,mjCardFrom:null,effectNumber:null,isCheckSimilarity:0,picUri:null},e),dataInfo:Object.assign({},this.dataInfoInit),dataValidate:{type:[{required:!0,trigger:"blur",type:"number",message:$t("routerMenu.faceError17")}],name:[{required:!0,trigger:"blur",message:$t("routerMenu.error85")}],sex:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError16"),type:"number"}],cardType:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError20"),type:"number"}],cardNum:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError19")}],birthDate:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError20"),type:"date"}],phone:[{required:!0,trigger:"blur",message:$t("routerMenu.error86")}],address:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError21")}],meno:[{}],listType:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError22"),type:"number"}],mjCardFrom:[{required:!0,trigger:"blur",type:"number",message:$t("routerMenu.faceError34")}],effectNumber:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError35"),type:"number"}],picUri:[{required:!0,trigger:"blur",message:$t("routerMenu.faceError36")}],uvalidTimeBeg:[{required:!0,trigger:"blur",message:$t("routerMenu.error88")}],uvalidTimeEnd:[{required:!0,trigger:"blur",message:$t("routerMenu.error89")}]}}},computed:m({},Object(l.e)("admin/layout",["isMobile"]),{labelWidth:function(){return 120},labelPosition:function(){return this.isMobile?"top":"right"}}),created:function(){this.location=location},mounted:function(){this.dataToServer(this.dataInfo),window.addEventListener("resize",this.handleResize),this.calculateVideoSize()},methods:{submit:function(){var e=Object(s.a)(o.a.mark((function e(){var t,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object.keys(this.dataInfo).forEach((function(e){return r.$set(r.dataInfo,e,"string"==typeof r.dataInfo[e]?r.dataInfo[e].trim():r.dataInfo[e])})),e.t0=console,e.next=5,this.$refs.formData.validate();case 5:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1,"名单管理保存"),e.next=9,this.$refs.formData.validate();case 9:if(!e.sent){e.next=23;break}if(t=null,this.$store.commit("loadingList",5),!this.dataInfo.id){e.next=19;break}return e.next=16,p.c.personUpdate(this.dataToServer(this.dataInfo),"non");case 16:t=e.sent,e.next=22;break;case 19:return e.next=21,p.c.personInsert(this.dataToServer(this.dataInfo),"non");case 21:t=e.sent;case 22:t&&(this.$emit("init",t.data?m({},t.data,{deptId:this.dataInfo.deptId}):null),this.isShow=!1,this.$Message.success(t.msg||$t("routerMenu.operationSucces")));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),resert:function(){this.$refs.formData.resetFields(),this.deleteImg("listInfoUpload"),this.dataInfo=Object.assign({},this.dataInfoInit)},listTypeChange:function(e){1==e&&(this.dataInfo.uvalidbegintime||this.$set(this.dataInfo,"uvalidbegintime",u()().format("YYYY-MM-DD ")+"00: 00: 00"),this.dataInfo.uvalidendtime||this.$set(this.dataInfo,"uvalidendtime",u()().format("YYYY-MM-DD ")+"23: 59: 59")),2==e&&(this.dataInfo.uvalidDateBeg||this.$set(this.dataInfo,"uvalidDateBeg",u()().format("YYYY-MM-DD")),this.dataInfo.uvalidDateEnd||(this.dataInfo.uvalidDateBeg?this.$set(this.dataInfo,"uvalidDateEnd",u()(this.dataInfo.uvalidDateBeg).format("YYYY-MM-DD")):this.$set(this.dataInfo,"uvalidDateEnd",u()().format("YYYY-MM-DD"))),this.dataInfo.uvalidTimeBeg||this.$set(this.dataInfo,"uvalidTimeBeg","00: 00: 00"),this.dataInfo.uvalidTimeEnd||this.$set(this.dataInfo,"uvalidTimeEnd","23: 59: 59"))},uvalidendtimeChange:function(e){this.$set(this.dataInfo,"uvalidendtime",u()(e).format("YYYY-MM-DD ")+"23: 59: 59")},serverToData:function(e){var t=JSON.parse(JSON.stringify(Object.assign({},this.dataInfo,e)));return 1==e.listType&&(t.uvalidbegintime=t.temporaryStartTime,t.uvalidendtime=t.temporaryEndTime),2==e.listType&&(t.uvalidDateBeg=u()(t.temporaryStartTime).format("YYYY-MM-DD"),t.uvalidTimeBeg=u()(t.temporaryStartTime).format("HH:mm:ss"),t.uvalidDateEnd=u()(t.temporaryEndTime).format("YYYY-MM-DD"),t.uvalidTimeEnd=u()(t.temporaryEndTime).format("HH:mm:ss")),t},dataToServer:function(e){var t=JSON.parse(JSON.stringify(e));return 1==t.listType&&(t.temporaryStartTime=u()(t.uvalidbegintime).format("YYYY-MM-DD HH:mm:ss"),t.temporaryEndTime=u()(t.uvalidendtime).format("YYYY-MM-DD HH:mm:ss")),2==t.listType&&(t.temporaryStartTime=u()(t.uvalidDateBeg).format("YYYY-MM-DD ")+t.uvalidTimeBeg,t.temporaryEndTime=u()(t.uvalidDateEnd).format("YYYY-MM-DD ")+t.uvalidTimeEnd),t.birthDate=u()(t.birthDate).format("YYYY-MM-DD HH:mm:ss"),Object.keys(this.listTypeTimeInit).forEach((function(e){delete t[e]})),0!=t.listType&&3!=t.listType||(delete t.temporaryStartTime,delete t.temporaryEndTime),t},changeImage:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,a,i,s,c,u=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.percentage=0,n=this,a=t.target.files&&t.target.files[0],i=1048576,!(a.size>i)){e.next=7;break}return this.removeImg(r),e.abrupt("return",this.$Message.error($t("routerMenu.faceError33")));case 7:return e.next=9,p.c.uploadFile(a,"_upload","",12e4,(function(e){var t=e.loaded/e.total*100|0;u.percentage=t}));case 9:(s=e.sent)&&s.data&&(this.dataInfo.picUri=s.data,(c=new FileReader).onload=function(e){n.picUriImg=this.result},c.readAsDataURL(a),this.$Message.success(s.msg||$t("routerMenu.faceError37"))),this.removeImg(r);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),deleteImg:function(e){this.removeImg(e),this.picUriImg="",this.$set(this.dataInfo,"picUri","")},removeImg:function(e){document.getElementById(e).value=""},validateCardNum:function(){var e=Object(s.a)(o.a.mark((function e(t,r,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$set(this.dataInfo,"cardNum",r.toString().trim()),this.$set(this.dataInfo,"birthDate",this.getBirthdayByIdNO(this.dataInfo.cardNum)),e.next=4,p.c.findAllCardIds([this.dataInfo.cardNum],"non");case 4:if(a=e.sent){e.next=9;break}return e.abrupt("return",n(new Error($("routerMenu.faceError38"))));case 9:if(a.dataList&&a.dataList.length){e.next=13;break}return e.abrupt("return",n());case 13:if(a.dataList[0].id!==this.dataInfo.id){e.next=15;break}return e.abrupt("return",n());case 15:return e.abrupt("return",n(new Error($("routerMenu.faceError39"))));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}(),getBirthdayByIdNO:function(e){return 18==e.length?e.substr(6,8).replace(/(.{4})(.{2})/,"$1-$2-"):15==e.length?("19"+e.substr(6,6)).replace(/(.{4})(.{2})/,"$1-$2-"):""},uploadImage:function(){var e=Object(s.a)(o.a.mark((function e(){var t,r,n,a,i,s,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.percentage=0,!this.paperPic){e.next=16;break}if(t=Object(d.a)(),n=this.paperPic,a=n.type.split("/")[1],r=/.*[\u4e00-\u9fa5]+.*$/.test(r)?t+"."+n.name.split(".")[1]+".".concat(a):"".concat(n.name,".").concat(a),i=new File([n],r,{type:n.type}),s=1048576,!(i.size>s)){e.next=10;break}return e.abrupt("return",this.$Message.error($t("routerMenu.faceError33")));case 10:return e.next=12,this.axios({method:"post",url:this.$faceApi.uploadFile,file:i,onUploadProgress:function(){},0:"upload"});case 12:(c=e.sent)&&c.data&&(this.dataInfo.picUri=c.data,this.$Message.success(c.msg||$t("routerMenu.faceError37")),this.stopNavigator()),e.next=17;break;case 16:return e.abrupt("return",this.$Message.error($t("routerMenu.faceerror83")));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),getCompetence:function(){var e=this;e.videoCameraShow=!0,e.thisCancas=document.getElementById("canvasCamera"),e.thisContext=this.thisCancas.getContext("2d"),e.thisVideo=document.getElementById("videoCamera"),e.thisVideo.style.display="block",void 0===navigator.mediaDevices&&(navigator.mediaDevices={}),void 0===navigator.mediaDevices.getUserMedia&&(navigator.mediaDevices.getUserMedia=function(e){var t=navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.getUserMedia;return t?new Promise((function(r,n){t.call(navigator,e,r,n)})):Promise.reject(new Error("getUserMedia is not implemented in this browser"))});var t={audio:!1,video:{width:this.videoWidth,height:this.videoHeight,transform:"scaleX(-1)"}};navigator.mediaDevices.getUserMedia(t).then((function(t){"srcObject"in e.thisVideo?e.thisVideo.srcObject=t:e.thisVideo.src=window.URL.createObjectURL(t),e.thisVideo.onloadedmetadata=function(t){e.thisVideo.play()},e.ishasCamera=!0,e.openVideo=!1,e.videoCameraShow||e.stopNavigator()})).catch((function(t){e.ishasCamera=!1,"NotAllowedError"==t.name||"PermissionDeniedError"==t.name?e.cameraMsg="您未授权使用摄像头，不能在当前页面进行拍照！请先关闭当前页面后重新授权！":e.cameraMsg="系统未检测到摄像头！请先安装摄像头！"}))},setImage:function(){this.thisContext.drawImage(this.thisVideo,0,0,this.videoWidth,this.videoHeight);var e=this.thisCancas.toDataURL("image/png");this.imgSrc=e,this.paperPic=this.dataURLtoFile(e,"paper")},stopNavigator:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.openVideo=!0,this.videoCameraShow=!1,this.thisVideo.srcObject&&(this.thisVideo.srcObject.getVideoTracks()[0].stop(),this.thisVideo.srcObject=null,this.imgSrc=null,this.paperPic=null);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),dataURLtoFile:function(e,t){for(var r=e.split(","),n=r[0].match(/:(.*?);/)[1],a=atob(r[1]),i=a.length,o=new Uint8Array(i);i--;)o[i]=a.charCodeAt(i);return new File([o],t,{type:n})},visibleChange:function(e){e||this.openVideo||this.stopNavigator()},handleResize:function(){this.windowWidth=window.innerWidth,this.calculateVideoSize()},calculateVideoSize:function(){var e=Math.min(480,.7*this.windowWidth);this.videoWidth=e,this.videoHeight=.75*e}},beforeDestroy:function(){window.removeEventListener("resize",this.handleResize)}}),g=r("20d2"),b=(r("199d"),r("2877")),y=Object(b.a)(v,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{class:e.$style.listInfo,attrs:{title:e.modalTitle,"mask-closable":!1,styles:{top:"0px"},fullscreen:!0},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[r("Form",{ref:"formData",attrs:{model:e.dataInfo,"label-width":e.labelWidth,rules:e.dataValidate,inline:"","label-colon":!0}},[r("div",{class:e.$style.formRow},[r("FormItem",{attrs:{label:e.$t("routerMenu.name"),prop:"name"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.name,callback:function(t){e.$set(e.dataInfo,"name",t)},expression:"dataInfo.name"}})],1),r("FormItem",{attrs:{label:e.$t("routerMenu.personType"),prop:"type"}},[r("Select",{attrs:{placeholder:e.$t("routerMenu.pleaseSelect")},model:{value:e.dataInfo.type,callback:function(t){e.$set(e.dataInfo,"type",t)},expression:"dataInfo.type"}},e._l(e.select.personTypeLs,(function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(e.$t(t.name))+"\n            ")])})),1)],1),r("FormItem",{attrs:{label:e.$t("routerMenu.sex"),prop:"sex"}},[r("Select",{attrs:{placeholder:e.$t("routerMenu.pleaseSelect")},model:{value:e.dataInfo.sex,callback:function(t){e.$set(e.dataInfo,"sex",t)},expression:"dataInfo.sex"}},e._l(e.select.sexLs,(function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(e.$t(t.name))+"\n            ")])})),1)],1),r("FormItem",{attrs:{label:e.$t("routerMenu.dateBirth"),prop:"birthDate","label-width":130}},[r("DatePicker",{attrs:{type:"date",placeholder:e.$t("routerMenu.pleaseSelect")},model:{value:e.dataInfo.birthDate,callback:function(t){e.$set(e.dataInfo,"birthDate",t)},expression:"dataInfo.birthDate"}})],1)],1),r("div",{class:e.$style.formRow},[r("FormItem",{attrs:{label:e.$t("routerMenu.ethnicGroup"),prop:"nation"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.nation,callback:function(t){e.$set(e.dataInfo,"nation",t)},expression:"dataInfo.nation"}})],1),r("FormItem",{attrs:{label:e.$t("routerMenu.homeTown"),prop:"nativePlace"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.nativePlace,callback:function(t){e.$set(e.dataInfo,"nativePlace",t)},expression:"dataInfo.nativePlace"}})],1),r("FormItem",{attrs:{label:e.$t("routerMenu.identityDocumentType"),prop:"cardType"}},[r("Select",{attrs:{placeholder:e.$t("routerMenu.pleaseSelect")},model:{value:e.dataInfo.cardType,callback:function(t){e.$set(e.dataInfo,"cardType",t)},expression:"dataInfo.cardType"}},e._l(e.select.cardTypeLs,(function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(e.$t(t.name))+"\n            ")])})),1)],1),r("FormItem",{attrs:{label:e.$t("routerMenu.governmentId"),prop:"cardNum"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.cardNum,callback:function(t){e.$set(e.dataInfo,"cardNum",t)},expression:"dataInfo.cardNum"}})],1)],1),r("div",{class:e.$style.formRow},[r("FormItem",{attrs:{label:e.$t("routerMenu.phone"),prop:"phone"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.phone,callback:function(t){e.$set(e.dataInfo,"phone",t)},expression:"dataInfo.phone"}})],1),r("FormItem",{attrs:{label:e.$t("routerMenu.accessCardId"),prop:"cardId"}},[r("Input",{attrs:{disabled:!0,type:"text",clearable:"",placeholder:e.$t("routerMenu.autoGenerate")},model:{value:e.dataInfo.cardId,callback:function(t){e.$set(e.dataInfo,"cardId",t)},expression:"dataInfo.cardId"}})],1),r("FormItem",{attrs:{label:e.$t("routerMenu.nameType"),prop:"listType"}},[r("Select",{attrs:{placeholder:e.$t("routerMenu.pleaseSelect")},on:{"on-change":e.listTypeChange},model:{value:e.dataInfo.listType,callback:function(t){e.$set(e.dataInfo,"listType",t)},expression:"dataInfo.listType"}},e._l(e.select.listTypeLs,(function(t){return r("Option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(e.$t(t.name))+"\n            ")])})),1)],1)],1),r("div",{class:e.$style.formRow},[r("FormItem",{attrs:{label:e.$t("routerMenu.address"),prop:"address"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.address,callback:function(t){e.$set(e.dataInfo,"address",t)},expression:"dataInfo.address"}})],1),r("FormItem",{attrs:{label:e.$t("routerMenu.remark"),prop:"meno"}},[r("Input",{attrs:{type:"text",clearable:"",placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.meno,callback:function(t){e.$set(e.dataInfo,"meno",t)},expression:"dataInfo.meno"}})],1)],1),1==e.dataInfo.listType?[r("div",{class:e.$style.formRow},[r("FormItem",{class:e.$style.dateTimeItem,attrs:{"label-width":e.labelWidth?150:e.labelWidth,label:e.$t("routerMenu.validFrom"),prop:"uvalidbegintime"}},[r("DatePicker",{attrs:{type:"datetime",placeholder:e.$t("routerMenu.validFrom")},model:{value:e.dataInfo.uvalidbegintime,callback:function(t){e.$set(e.dataInfo,"uvalidbegintime",t)},expression:"dataInfo.uvalidbegintime"}})],1),r("FormItem",{class:e.$style.dateTimeItem,attrs:{"label-width":e.labelWidth?150:e.labelWidth,label:e.$t("routerMenu.validTo"),prop:"uvalidendtime"}},[r("DatePicker",{attrs:{type:"datetime",placeholder:e.$t("routerMenu.validTo")},on:{"on-change":e.uvalidendtimeChange},model:{value:e.dataInfo.uvalidendtime,callback:function(t){e.$set(e.dataInfo,"uvalidendtime",t)},expression:"dataInfo.uvalidendtime"}})],1)],1)]:e._e(),2==e.dataInfo.listType?[r("div",{class:e.$style.formRow},[r("FormItem",{class:e.$style.dateTimeItem,attrs:{"label-width":e.labelWidth?150:e.labelWidth,label:e.$t("routerMenu.validFrom"),prop:"uvalidDateBeg"}},[r("DatePicker",{attrs:{clearable:!1,type:"date",placeholder:e.$t("routerMenu.validFrom")},model:{value:e.dataInfo.uvalidDateBeg,callback:function(t){e.$set(e.dataInfo,"uvalidDateBeg",t)},expression:"dataInfo.uvalidDateBeg"}})],1),r("FormItem",{class:e.$style.dateTimeItem,attrs:{"label-width":e.labelWidth?150:e.labelWidth,label:e.$t("routerMenu.validTo"),prop:"uvalidDateEnd"}},[r("DatePicker",{attrs:{clearable:!1,type:"date",placeholder:e.$t("routerMenu.validTo")},model:{value:e.dataInfo.uvalidDateEnd,callback:function(t){e.$set(e.dataInfo,"uvalidDateEnd",t)},expression:"dataInfo.uvalidDateEnd"}})],1)],1),r("div",{class:e.$style.formRow},[r("FormItem",{class:e.$style.timeItem,attrs:{"label-width":e.labelWidth?150:e.labelWidth,label:e.$t("routerMenu.dailyStartTime"),prop:"uvalidTimeBeg"}},[r("TimePicker",{attrs:{format:"HH:mm:ss",placeholder:e.$t("routerMenu.dailyStartTime")},model:{value:e.dataInfo.uvalidTimeBeg,callback:function(t){e.$set(e.dataInfo,"uvalidTimeBeg",t)},expression:"dataInfo.uvalidTimeBeg"}})],1),r("FormItem",{class:e.$style.timeItem,attrs:{"label-width":e.labelWidth?150:e.labelWidth,label:e.$t("routerMenu.dailyEndTime"),prop:"uvalidTimeEnd"}},[r("TimePicker",{attrs:{format:"HH:mm:ss",placeholder:e.$t("routerMenu.dailyEndTime")},model:{value:e.dataInfo.uvalidTimeEnd,callback:function(t){e.$set(e.dataInfo,"uvalidTimeEnd",t)},expression:"dataInfo.uvalidTimeEnd"}})],1)],1)]:e._e(),3==e.dataInfo.listType?[r("div",{class:e.$style.formRowFull},[r("FormItem",{attrs:{label:e.$t("routerMenu.validTimes"),data:"addSpan",prop:"effectNumber"}},[r("InputNumber",{attrs:{min:0,placeholder:e.$t("routerMenu.pleaseEnter")},model:{value:e.dataInfo.effectNumber,callback:function(t){e.$set(e.dataInfo,"effectNumber",t)},expression:"dataInfo.effectNumber"}}),r("span",[e._v(e._s(e.$t("routerMenu.order")))])],1)],1)]:e._e(),r("div",{class:e.$style.formRow},[r("FormItem",{class:e.$style.uploadItem,attrs:{label:e.$t("routerMenu.uploadPhotos"),prop:"picUri"},model:{value:e.dataInfo.picUri,callback:function(t){e.$set(e.dataInfo,"picUri",t)},expression:"dataInfo.picUri"}},[r("div",{staticClass:"ivu-upload ivu-upload-drag",class:e.$style.listInfoUpload},[r("input",{staticClass:"ivu-upload-input",attrs:{disabled:e.$store.state._loading,type:"file",accept:"image/png,image/jpeg,image/jpeg,image/jpeg",id:"listInfoUpload"},on:{change:function(t){return e.changeImage(t,"listInfoUpload")}}}),r("label",{staticStyle:{display:"block",height:"100%"},attrs:{for:"listInfoUpload"}},[e.picUriImg||e.dataInfo.picUri?r("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:e.picUriImg?e.picUriImg:-1!=e.dataInfo.picUri.indexOf("http")?e.dataInfo.picUri:this.$faceApi.imgUrl+e.dataInfo.picUri,alt:""}}):e._e(),e.picUriImg||e.dataInfo.picUri?e._e():r("i",{staticClass:"ivu-icon ivu-icon-ios-cloud-upload",staticStyle:{"font-size":"30px",color:"rgb(51, 153, 255)","margin-top":"20px"}}),e.picUriImg||e.dataInfo.picUri?e._e():r("p",[e._v(e._s(e.$t("routerMenu.uploadPhotos")))]),e.picUriImg||e.dataInfo.picUri?r("Icon",{class:e.$style.delete,attrs:{type:"md-add-circle"},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteImg("listInfoUpload")}}}):e._e()],1),e.$store.state._loading?r("div",{staticClass:"uploadExcelTransition",staticStyle:{padding:"20px 0"}},[r("transition",{attrs:{name:"fade"}},[r("i-circle",{staticStyle:{width:"67px",height:"67px"},attrs:{percent:parseInt(e.percentage,10)}},[r("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"18px"}},[e._v(e._s(parseInt(e.percentage,10))+"%")])])],1)],1):e._e(),r("Button",{staticStyle:{"text-align":"left"},attrs:{type:"success",icon:"md-camera",ghost:"",shape:"circle"},on:{click:e.getCompetence}},[e._v("\n              "+e._s(e.$t("routerMenu.capturePhoto")))])],1)]),r("FormItem",{class:e.$style.checkboxItem,attrs:{label:e.$t("routerMenu.isPhotoVerification"),prop:"isCheckSimilarity","label-width":200}},[r("Checkbox",{attrs:{"false-value":0,"true-value":1},model:{value:e.dataInfo.isCheckSimilarity,callback:function(t){e.$set(e.dataInfo,"isCheckSimilarity",t)},expression:"dataInfo.isCheckSimilarity"}})],1)],1)],2),r("div",{class:e.$style.footer,attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:function(t){e.isShow=!1}}},[e._v(e._s(e.$t("routerMenu.cancel")))]),r("Button",{attrs:{type:"primary",loading:e.$store.state.loadingList[5]},on:{click:e.submit}},[e._v("\n        "+e._s(e.$t("routerMenu.save"))+"\n      ")])],1)],1),r("Modal",{attrs:{title:e.$t("routerMenu.capturePhoto"),width:Math.min(1e3,.8*e.windowWidth)},on:{"on-visible-change":e.visibleChange},model:{value:e.videoCameraShow,callback:function(t){e.videoCameraShow=t},expression:"videoCameraShow"}},[e.ishasCamera?r("div",{staticClass:"camera_outer",staticStyle:{display:"flex"}},[e.openVideo?r("p",{staticClass:"openVideoLoading",attrs:{loading:e.openVideo}},[e._v("\n        "+e._s(e.$t("routerMenu.faceError84"))+"\n      ")]):e._e(),r("div",[e.openVideo?e._e():r("p",{staticClass:"sxt_p"},[e._v(" "+e._s(e.$t("routerMenu.liveView")))]),r("video",{attrs:{id:"videoCamera",width:e.videoWidth,height:e.videoHeight,autoplay:""}})]),r("div",{staticStyle:{"margin-left":"5px"}},[r("p",{staticClass:"yl_p"},[e._v(" "+e._s(e.$t("routerMenu.photoPreview")))]),r("canvas",{staticStyle:{display:"none"},attrs:{id:"canvasCamera",width:e.videoWidth,height:e.videoHeight}}),e.imgSrc?r("div",{staticClass:"img_bg_camera"},[r("img",{staticClass:"tx_img",attrs:{src:e.imgSrc,alt:""}})]):e._e()])]):r("div",{staticClass:"camera_outer nocamera"},[e._v("\n      "+e._s(e.cameraMsg)+"\n    ")]),r("div",{staticClass:"lmBox",attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{icon:"md-camera",type:"success",disabled:!e.ishasCamera||e.openVideo},on:{click:function(t){return e.setImage()}}},[e._v(e._s(e.paperPic?e.$t("routerMenu.retakePhoto"):e.$t("routerMenu.takePhoto")))]),r("div",[r("Button",{attrs:{type:"dashed",shape:"circle"},on:{click:e.stopNavigator}},[e._v(e._s(e.$t("routerMenu.cancel")))]),r("Button",{attrs:{type:"primary",shape:"circle",disabled:!e.ishasCamera||!e.paperPic},on:{click:e.uploadImage}},[e._v("\n          "+e._s(e.$t("routerMenu.uploadPhoto"))+"\n        ")])],1)],1)])],1)}),[],!1,(function(e){this.$style=g.default.locals||g.default}),"12c17ddc",null).exports;function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x={props:["devGroupData"],name:"",data:function(){return{personObj:{},modalTitle:$t("routerMenu.deviceGroup"),isShow:!1,devList:[],devGroupList:{}}},computed:w({},Object(l.e)("admin/layout",["isMobile"]),{labelWidth:function(){return this.isMobile?void 0:100},labelPosition:function(){return this.isMobile?"top":"right"}}),mounted:function(){},methods:{getDevGroupId:function(){var e="";for(var t in this.devGroupList)this.devGroupList.hasOwnProperty(t)&&!0===this.devGroupList[t]&&(e=t);return e},submit:function(){var e=Object(s.a)(o.a.mark((function e(){var t,r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.getDevGroupId(),this.personObj.deptId!=t&&(t||this.personObj.deptId)){e.next=5;break}return this.isShow=!1,e.abrupt("return");case 5:return r={ids:[this.personObj.id],delDeptId:this.personObj.deptId,addDeptId:t},e.next=8,p.c.personBindDeptIssue(r,"_");case 8:(n=e.sent)&&(this.$emit("init",n.data?w({},n.data,{},r):null),this.isShow=!1,this.$Message.success(n.msg||$t("routerMenu.operationSucces")));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),resert:function(){this.devGroupList={},this.indeterminate=!1,this.checkAll=!1},initData:function(){var e=Object(s.a)(o.a.mark((function e(t,r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.personObj=t,this.devList=r,t.deptId&&this.$set(this.devGroupList,t.deptId+"",!0);case 3:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),validateDepartName:function(){var e=Object(s.a)(o.a.mark((function e(t,r,n){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.c.departFindByDepartName("","non",r);case 2:if(!(a=e.sent)){e.next=11;break}if(!a.data||!a.data.id){e.next=8;break}return e.abrupt("return",n(new Error($t("routerMenu.faceError40"))));case 8:return e.abrupt("return",n());case 9:e.next=12;break;case 11:return e.abrupt("return",n(new Error($t("routerMenu.faceError41"))));case 12:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),devGroupChange:function(e,t){for(var r in this.devGroupList)this.devGroupList.hasOwnProperty(r)&&this.$set(this.devGroupList,r,!1);!0===e&&this.$set(this.devGroupList,t.id+"",!0)}}},M=(r("a4f6"),Object(b.a)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Modal",{attrs:{title:e.modalTitle+" ("+e.devGroupData.name+")","mask-closable":!1},model:{value:e.isShow,callback:function(t){e.isShow=t},expression:"isShow"}},[r("Divider",{attrs:{plain:"",color:"red"}},[e._v(e._s(e.$t("routerMenu.bindDeviceGroup")))]),r("div",{staticClass:"group_box"},[r("Form",{ref:"formData"},[e.$store.state._loading?r("Spin",{attrs:{fix:""}},[r("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:30}})],1):e._e(),r("FormItem",{attrs:{prop:"departName"}},[r("div",{staticClass:"checkbox_container"},e._l(e.devList,(function(t){return r("Checkbox",{key:t.id,staticClass:"checkbox_item",attrs:{label:t.id},on:{"on-change":function(r){return e.devGroupChange(r,t)}},model:{value:e.devGroupList[t.id+""],callback:function(r){e.$set(e.devGroupList,t.id+"",r)},expression:"devGroupList[item.id + '']"}},[r("em",{staticStyle:{"margin-left":"8px"}}),e._v(e._s(t.departName)+"\n                        ")])})),1)])],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:function(t){e.isShow=!1}}},[e._v(e._s(e.$t("routerMenu.cancel")))]),r("Button",{attrs:{type:"primary",loading:e.$store.state._loading},on:{click:e.submit}},[e._v(e._s(e.$t("routerMenu.save")))])],1)],1)],1)}),[],!1,null,"e1c7bc8c",null).exports),k=r("19de"),S=r.n(k),_=(r("4f7f"),r("5df3"),r("1c4c"),r("2d95"),r("a09b"),{name:"",data:function(){return{showUploadExcel:!1,id:"batchImportUpload",percentage:0,uploadExcelnum:0}},methods:{changeExcel:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.percentage=0,r=t.target.files&&t.target.files[0]){e.next=4;break}return e.abrupt("return");case 4:if(n=83886080,!(r.size>n)){e.next=8;break}return this.removeImg(this.id),e.abrupt("return",this.$Message.error($t("routerMenu.error77")));case 8:this.validateExcel(r,Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.c.personImportExcelData(r,"_upload","",12e4,(function(e){var t=e.loaded/e.total*100|0;a.percentage=t}));case 2:e.sent&&(a.$Message.success($t("routerMenu.error83")+a.uploadExcelnum+$t("routerMenu.error84")),setTimeout((function(){a.showUploadExcel=!1,a.$emit("init"),a.percentage=0,a.uploadExcelnum=0}),800)),a.removeExcel();case 5:case"end":return e.stop()}}),e)}))));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),closeClick:function(){this.showUploadExcel=!1,this.percentage=0,this.uploadExcelnum=0,this.removeExcel()},removeExcel:function(){document.getElementById(this.id).value=""},validateExcel:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n,i,c,u=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this,(c=new FileReader).onload=function(){var e=Object(s.a)(o.a.mark((function e(t){var s,c,l,d,f,m,h,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.target.result,i=XLSX.read(s,{type:"binary"}),e.next=4,XLSX.utils.sheet_to_json(i.Sheets[i.SheetNames[0]]);case 4:if(c=e.sent,u.uploadExcelnum=c.length,c.length){e.next=8;break}return e.abrupt("return",u.$Message.error($t("routerMenu.error78")));case 8:if(l=[],d=0,f="",!c.every((function(e,t){return d=t,e.Name?e.Type?e.RosterType?e.Gender?e.IDType?e.IDNumber?(l.push(e.IDNumber),e.Phone?e.DateofBirth?!!e.Address||(f=$t("routerMenu.faceError21"),!1):(f=$t("routerMenu.faceError20"),!1):(f=$t("routerMenu.error86"),!1)):(f=$t("routerMenu.faceError19"),!1):(f=$t("routerMenu.faceError18"),!1):(f=$t("routerMenu.faceError16"),!1):(f=$t("routerMenu.faceError22"),!1):(f=$t("routerMenu.faceError17"),!1):(f=$t("routerMenu.error85"),!1)}))){e.next=31;break}if(m=Array.from(new Set(l)),!(l.length>m.length)){e.next=23;break}h=0;case 16:if(!(h<l.length)){e.next=23;break}if(l[h]===m[h]){e.next=20;break}return u.$Message.error({content:" ".concat($t("routerMenu.error116")).concat(h+2," ").concat($t("routerMenu.error117"),"! ").concat($t("routerMenu.governmentId"),":'").concat(l[h],"' ").concat($t("routerMenu.faceError30")),duration:5}),e.abrupt("return");case 20:h++,e.next=16;break;case 23:return e.next=25,p.c.findAllCardIds(l,"_");case 25:if(v=e.sent){e.next=28;break}return e.abrupt("return",u.$Message.error($t("routerMenu.faceError31")));case 28:v.dataList&&v.dataList.length?(u.$Message.error({render:function(e){return e("div",[$t("routerMenu.faceError32")].concat(Object(a.a)(v.dataList.map((function(t){return e("p",{},t.cardNum)})))))},duration:5}),u.$store.commit("_loading",!1),u.uploadExcelnum=0,n.removeExcel()):r(),e.next=35;break;case 31:u.$Message.error({content:"".concat($t("routerMenu.error116")).concat(d+2).concat($t("routerMenu.error117")).concat(f),duration:5}),u.$store.commit("_loading",!1),u.uploadExcelnum=0,n.removeExcel();case 35:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,c.readAsBinaryString(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()}}),O=r("86af"),D=Object(b.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:""}},[r("Modal",{attrs:{title:this.$t("routerMenu.uploadExcel"),loading:e.$store.state._loading,"mask-closable":!1,closable:!e.$store.state._loading},model:{value:e.showUploadExcel,callback:function(t){e.showUploadExcel=t},expression:"showUploadExcel"}},[r("div",{staticStyle:{width:"100%",height:"100%"}},[r("div",{staticClass:"ivu-upload ivu-upload-drag",class:e.$style.excelUpload},[r("input",{staticClass:"ivu-upload-input",attrs:{disabled:e.$store.state._loading,type:"file",accept:"application/vnd.ms-excel, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",id:e.id},on:{change:function(t){return e.changeExcel(t)}}}),r("label",{staticStyle:{display:"block"},attrs:{for:e.id}},[r("div",{staticStyle:{padding:"20px 0"}},[r("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),r("p",[e._v(e._s(e.$t("routerMenu.faceError14")))])],1)]),r("Alert",{staticStyle:{margin:"0"},attrs:{type:"warning","show-icon":""}},[e._v(e._s(e.$t("routerMenu.faceError15")))]),e.$store.state._loading||e.percentage||e.uploadExcelnum?r("div",{staticClass:"uploadExcelTransition",staticStyle:{padding:"20px 0"}},[r("transition",{attrs:{name:"fade"}},[r("i-circle",{staticStyle:{width:"80px",height:"80px"},attrs:{percent:parseInt(e.percentage,10)}},[r("span",{staticClass:"demo-Circle-inner",staticStyle:{"font-size":"20px"}},[e._v(e._s(parseInt(e.percentage,10))+"%")])])],1)],1):e._e()],1)]),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"dashed",shape:"circle",loading:e.$store.state._loading},on:{click:e.closeClick}},[e._v(e._s(e.$t("routerMenu.close")))])],1)])],1)}),[],!1,(function(e){this.$style=O.default.locals||O.default}),null,null).exports,T=r("4ba5"),L=r("9c0d"),P=r("7cb1");function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var j=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(r,!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{name:"",components:{ListInfo:y,DevGroup:M,BatchImport:D,DdevicePushPerson:T.a},created:function(){this.location=window.location},data:function(){var e=this;return{devGroupPushShow:!1,deviceType:this.$store.state.deviceType,devLogParams:{},devsInfo:[],devGroupList:[],userInfo:{},searchForm:{pageNum:1,pageSize:10},bigImg:"",showBigImg:!1,bigImgTitle:"",columns:[{type:"selection",width:80,align:"center",key:"index",fixed:"left"},{title:$t("routerMenu.personType"),key:"type",align:"center",minWidth:100,fixed:"left",render:function(e,t){var r=L.k.find((function(e){return e.id===t.row.type}));return e("div",r?$t(r.name):"")},filters:L.k.map((function(e){return{label:$t(e.name),value:e.id}})),filterMultiple:!1,filterRemote:function(t,r,n){t&&(e.searchForm.type=t[0],e.handleSearch())}},{title:$t("routerMenu.name"),key:"name",align:"center",minWidth:120,fixed:"left",renderHeader:function(t,r){var n=r.column,a=r.index;if(e.$refs.table)return t("span",e.$refs.table.$scopedSlots.name({column:n,index:a}))}},{title:$t("routerMenu.nameType"),key:"listType",align:"center",minWidth:100,render:function(e,t){var r=L.h.find((function(e){return e.id===t.row.listType}));return e("div",r?$t(r.name):"")}},{title:$t("routerMenu.accessCardId"),key:"cardId",align:"center",minWidth:150},{title:$t("routerMenu.sex"),key:"sex",align:"center",minWidth:120,render:function(e,t){var r=L.m.find((function(e){return e.id===t.row.sex}));return e("div",r?$t(r.name):"")},filters:L.m.map((function(e){return{value:e.id,label:$t(e.name)}})),filterMultiple:!1,filterRemote:function(t,r,n){t&&(e.searchForm.sex=t[0],e.handleSearch())}},{title:$t("routerMenu.profileAvatar"),align:"center",key:"picUri",minWidth:120,render:function(t,r){return t("div",{class:"faceImgBox",on:{dblclick:function(t){var n=t||window.event;n&&n.stopPropagation?n.stopPropagation():n.cancelBubble=!0,e.bigImg=-1!=r.row.picUri.indexOf("http")?r.row.picUri:e.$faceApi.imgUrl+r.row.picUri,e.showBigImg=!0,e.bigImgTitle=r.row.name}}},[t("img",{domProps:{src:-1!=r.row.picUri.indexOf("http")?r.row.picUri:e.$faceApi.imgUrl+r.row.picUri},style:{display:r.row.picUri?"inherit":"none"}})])}},{title:$t("routerMenu.deviceGroup"),key:"deptId",align:"center",minWidth:150,render:function(t,r){var n=e.devGroupList.find((function(e){return e.id==r.row.deptId}));return t("span",{},n?n.departName:"")},filters:[],filterMultiple:!1,filterRemote:function(t,r,n){t&&(e.searchForm.deptId=t[0],e.handleSearch())}},{title:$t("routerMenu.registerTime"),key:"createTime",align:"center",minWidth:170},{title:$t("routerMenu.dateBirth"),key:"birthDate",align:"center",minWidth:120,render:function(e,t){return e("div",t.row.birthDate?u()(t.row.birthDate).format("YYYY-MM-DD"):"")}},{title:$t("routerMenu.identityDocumentType"),key:"cardType",align:"center",minWidth:120,render:function(e,t){var r=L.b.find((function(e){return e.id===t.row.cardType}));return e("div",r?$t(r.name):"")}},{title:$t("routerMenu.governmentId"),key:"cardNum",align:"center",minWidth:180},{title:$t("routerMenu.phone"),key:"phone",align:"center",minWidth:128},{title:$t("routerMenu.ethnicGroup"),key:"nation",align:"center",minWidth:100},{title:$t("routerMenu.homeTown"),key:"nativePlace",align:"center",minWidth:120},{title:$t("routerMenu.address"),key:"address",align:"center",minWidth:150},{title:$t("routerMenu.remark"),key:"meno",align:"center",minWidth:150},{title:$t("routerMenu.operate"),minWidth:280,align:"center",fixed:"right",render:function(t,r){return t("div",[t("Button",{props:{type:"primary",size:"small",icon:"md-create",disabled:e.devGroupPushShow},style:{margin:"3px"},on:{click:function(){e.edit(r.row)}}},$t("routerMenu.edit")),t("Button",{props:{loading:e.$store.state.loadingList[r.index+10],type:"error",size:"small",icon:"md-close",disabled:e.devGroupPushShow},style:{margin:"3px"},on:{click:function(){e.remove(r.row,r.index+10)}}},$t("routerMenu.delete")),t("Button",{props:{type:"info",size:"small",icon:"md-recording",disabled:e.devGroupPushShow},style:{margin:"3px"},on:{click:function(){e.setDevGroup(r.row)}}},$t("routerMenu.deviceGroup"))])}}],dateTimes:[u()().startOf("day").format("YYYY-MM-DD HH:mm:ss"),u()().endOf("day").format("YYYY-MM-DD HH:mm:ss")],data:[],total:1,sexLs:L.m,constCardMode:L.c,createCardWay:L.d,cardTypeLs:L.b,listTypeLs:"2"===this.$store.state.deviceType?L.h.filter((function(e){return 0==e.id||1==e.id})):L.h,personTypeLs:L.k,nationLs:L.i,selection:[],devGroupData:{}}},mounted:function(){var e=Object(s.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initData();case 2:this.init();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),methods:{devGroupPushClick:function(){var e=Object(s.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.devsInfo=[],this.init(),t&&t.createTime&&(this.devLogParams=t,t.delDevInfo&&(r=this.devsInfo).push.apply(r,Object(a.a)(JSON.parse(t.delDevInfo).map((function(e){return e.action="DeletePerson",e})))),t.addDevInfo&&(n=this.devsInfo).push.apply(n,Object(a.a)(JSON.parse(t.addDevInfo).map((function(e){return e.action="AddPersons",e})))),this.devsInfo.length&&(this.devGroupPushShow=!0));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),personPushClick:function(){var e=Object(s.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.devsInfo=[],this.init(),t&&t.createTime&&(this.devLogParams=t,t.addDevInfo&&(r=this.devsInfo).push.apply(r,Object(a.a)(JSON.parse(t.addDevInfo).map((function(e){return e.action="EditPerson",e})))),this.devsInfo.length&&(this.devGroupPushShow=!0));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),init:function(){this.personFindAllPage()},searchCon:function(){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(r,!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.searchForm,{startTime:u()(this.dateTimes[0]).format("YYYY-MM-DD HH:mm:ss"),endTime:u()(this.dateTimes[1]).format("YYYY-MM-DD HH:mm:ss")})},personFindAllPage:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.c.personFindAllPage(this.searchCon());case 2:(t=e.sent)&&(this.total=t.data.total,this.data=t.data.list);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.searchForm.pageNum=e,this.init()},changePageSize:function(e){this.searchForm.pageNum=1,this.searchForm.pageSize=e,this.init()},handleSearch:function(){this.searchForm.pageNum=1,this.init()},add:function(){this.$refs.listInfo.resert(),this.$refs.listInfo.isShow=!0},edit:function(e){this.$refs.listInfo.resert(),this.userInfo=JSON.parse(JSON.stringify(e)),this.userInfo.birthDate=u()(e.birthDate).format("YYYY-MM-DD"),this.$refs.listInfo.isShow=!0},selectionChange:function(e){this.selection=e},setDevGroup:function(e){this.$refs.devGroup.resert(),this.devGroupData=JSON.parse(JSON.stringify(e)),this.$refs.devGroup.initData(e,this.devGroupList),this.$refs.devGroup.isShow=!0},remove:function(){var e=Object(s.a)(o.a.mark((function e(t,r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$Modal.confirm({title:$t("routerMenu.confirmDeletion"),content:$t("routerMenu.confirmDeletion")+" "+t.name+" ?"});case 2:if(!e.sent){e.next=8;break}return this.$store.commit("loadingList",r),e.next=6,p.c.personDel("","non",t.id);case 6:(n=e.sent)&&(this.devsInfo=[],this.init(),this.$Message.success(n.msg||$t("routerMenu.operationSucces")),this.devGroupPushClick(n.data));case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}(),removes:function(){var e=Object(s.a)(o.a.mark((function e(){var t,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.selection.length){e.next=2;break}return e.abrupt("return",this.$Message.error($t("routerMenu.faceError12")));case 2:return e.next=4,$Modal.confirm({render:function(e){return e("div",[e("div",{class:"ivu-modal-confirm-head ivu-modal-confirm-body-h4-header"},[e("div",{class:"ivu-modal-confirm-head-icon ivu-modal-confirm-head-icon-confirm"},[e("i",{class:"ivu-icon ivu-icon-ios-help-circle"})]),e("div",{class:"ivu-modal-confirm-head-title"},"")]),e("div",{class:"ivu-modal-confirm-body-div-box"},r.selection.map((function(t){return e("span",{style:{marginLeft:"10px"}},t.name)})))])},loading:this.$store.state._loading});case 4:if(!e.sent){e.next=10;break}return e.next=8,p.c.personDels(this.selection.map((function(e){return e.id})),"_");case 8:(t=e.sent)&&(this.init(),this.$Message.success(t.msg||$t("routerMenu.operationSucces")),this.selection.length=0,this.devGroupPushClick(t.data));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),excelToJsonSort:function(){var e=Object(s.a)(o.a.mark((function e(){var t,r,n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.columns.filter((function(e){return e.key&&"index"!==e.key})).map((function(e){var t=105;return"picUri"===e.key&&(t=200),{value:e.key,name:e.title,width:t,height:25}})),delete(r=JSON.parse(JSON.stringify(this.searchCon()))).pageNum,delete r.pageSize,this.$store.commit("loadingList",1),e.next=7,p.c.personFindAll(r,"non");case 7:if(!(n=e.sent)){e.next=12;break}return this.$Message.success($t("routerMenu.downloadingExcelFile")),n.dataList.length||(n.dataList=[]),e.abrupt("return",{headers:t,jsonArr:n.dataList.map((function(e){var t=function(t){if(e[t]||0===e[t]){if("type"===t){var r=L.k.find((function(r){return r.id==e[t]}));e[t]=r?$t(r.name):""}if("sex"===t){var n=L.m.find((function(r){return r.id==e[t]}));e[t]=n?$t(n.name):""}if("cardType"===t){var i=L.b.find((function(r){return r.id==e[t]}));e[t]=i?$t(i.name):""}if("listType"===t){var o=L.h.find((function(r){return r.id==e[t]}));e[t]=o?$t(o.name):""}if("deptId"===t){var s=a.devGroupList.find((function(r){return r.id==e[t]}));e[t]=s?s.departName:""}"birthDate"===t&&(e[t]=u()(e[t]).format("YYYY-MM-DD"))}else e[t]=""};for(var r in e)t(r);return e}))});case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),exportExcelAll:function(){var e=Object(s.a)(o.a.mark((function e(){var t,r,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.excelToJsonSort();case 2:if(!(t=e.sent)){e.next=10;break}return r=t.headers,n=t.jsonArr,e.next=8,Object(P.a)($t("routerMenu.personnelList"),r,n);case 8:a=e.sent,S()(a,$t("routerMenu.personnelList")+".xls");case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),exportExcel:function(){var e=Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.$store.commit("loadingList",2),e.next=3,p.c.downLoadCPerTemp("","non-download");case 3:(t=e.sent)&&(this.$Mess,S()(t,$t("routerMenu.personnelList")+".xls"),this.$Message.success($t("routerMenu.downloadingExcelFile")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),initData:function(){var e=Object(s.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.c.departFindAll({},"non").then((function(e){e&&e.data&&(t.devGroupList=e.data),t.devGroupList.length&&t.columns.forEach((function(e,r){"deptId"===e.key&&t.$set(t.columns[r],"filters",t.devGroupList.map((function(e){return{label:e.departName,value:e.id}})))}))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}),F=(r("f6da"),r("ed12")),U=Object(b.a)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i-table-no-border selection"},[n("div",{staticClass:"pageHeader"},[n("h4",[e._v(e._s(e.$t("routerMenu.personnelList")))]),n("div",{staticClass:"buttons"},[n("Button",{attrs:{type:"error",icon:"md-close",loading:e.$store.state.loading||e.$store.state.loadingList[0]},on:{click:e.removes}},[e._v(e._s(e.$t("routerMenu.batchDelete")))]),n("Button",{attrs:{type:"info",icon:"ios-list",loading:e.$store.state.loading||e.$store.state.loadingList[1]},on:{click:e.exportExcelAll}},[e._v(e._s(e.$t("routerMenu.export")))]),n("Button",{attrs:{type:"info",icon:"ios-list",loading:e.$store.state.loading||e.$store.state.loadingList[2]},on:{click:e.exportExcel}},[e._v(e._s(e.$t("routerMenu.downloadExcelTemplate")))]),n("Button",{attrs:{type:"info",icon:"md-arrow-round-up",loading:e.$store.state.loadingList[1]||e.$store.state.loading},on:{click:function(t){e.$refs.batchImport.showUploadExcel=!0}}},[e._v(e._s(e.$t("routerMenu.batchImport")))]),n("Button",{attrs:{type:"success",icon:"md-add",loading:e.$store.state.loading},on:{click:e.add}},[e._v(e._s(e.$t("routerMenu.add")))])],1)]),n("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[n("Form",{ref:"searchForm",staticClass:"search-form",attrs:{inline:"","label-width":0}},[n("FormItem",{attrs:{prop:"dateTimes",label:""}},[n("DatePicker",{staticClass:"date-timerange",staticStyle:{"min-width":"315px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("routerMenu.pleaseEnterTime"),clearable:!1},model:{value:e.dateTimes,callback:function(t){e.dateTimes=t},expression:"dateTimes"}})],1),n("Form-item",{attrs:{"label-width":1}},[n("Button",{attrs:{type:"primary",icon:"md-search",loading:e.$store.state.loading},on:{click:e.handleSearch}},[e._v(e._s(e.$t("routerMenu.search")))]),n("Button",{staticClass:"ivu-ml-8",attrs:{icon:"md-refresh",loading:e.$store.state.loading},on:{click:function(t){return e.$emit("handleReload")}}},[e._v(e._s(e.$t("routerMenu.resetting")))])],1)],1),n("Table",{ref:"table",attrs:{loading:e.$store.state.loading,height:e.data.length>=5?570:"",columns:e.columns,data:e.data},on:{"on-row-dblclick":e.edit,"on-selection-change":e.selectionChange},scopedSlots:e._u([{key:"name",fn:function(t){var r=t.column,a=t.index;return[n("filter-search",{attrs:{column:r,index:a,searchForm:e.searchForm,searchKey:"name"},on:{handleSearch:e.handleSearch}})]}},{key:"cardId",fn:function(t){var r=t.column,a=t.index;return[n("filter-search",{attrs:{column:r,index:a,searchForm:e.searchForm,searchKey:"cardId"},on:{handleSearch:e.handleSearch}})]}}])}),n("div",{staticClass:"ivu-mt ivu-text-center"},[n("Page",{attrs:{current:this.searchForm.pageNum,total:e.total,"page-size":this.searchForm.pageSize,"page-size-opts":[10,20,50,100],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1),n("list-info",{ref:"listInfo",attrs:{userInfo:e.userInfo,select:{sexLs:e.sexLs,constCardMode:e.constCardMode,createCardWay:e.createCardWay,cardTypeLs:e.cardTypeLs,listTypeLs:e.listTypeLs,personTypeLs:e.personTypeLs,nationLs:e.nationLs}},on:{init:e.personPushClick}}),n("dev-group",{ref:"devGroup",attrs:{devGroupData:e.devGroupData},on:{init:e.devGroupPushClick}}),n("batch-import",{ref:"batchImport",on:{init:e.init}}),n("Modal",{attrs:{title:e.bigImgTitle,"class-name":"vertical-center-modal","footer-hide":""},model:{value:e.showBigImg,callback:function(t){e.showBigImg=t},expression:"showBigImg"}},[n("div",{class:e.$style.bigImg},[e.bigImg?n("img",{attrs:{src:e.bigImg,alt:""},on:{error:function(t){e.bigImg=""}}}):n("img",{attrs:{src:r("3534"),alt:""}})])]),e.devGroupPushShow?n("div",[n("DdevicePushPerson",{attrs:{devsInfo:e.devsInfo,createTime:e.devLogParams.createTime,action:e.devLogParams.action},on:{close:function(t){e.devGroupPushShow=!1}}})],1):e._e()],1)}),[],!1,(function(e){this.$style=F.default.locals||F.default}),null,null);t.default=U.exports},"126f":function(e,t,r){e.exports={modal:"devicePushPerson_modal_1gnmg",title:"devicePushPerson_title_6r3nA",ul:"devicePushPerson_ul_11la3",devImgs:"devicePushPerson_devImgs_3yW-X"}},"199d":function(e,t,r){"use strict";var n=r("7983");r.n(n).a},"19de":function(e,t){e.exports=function(e,t,r,n){var a=new Blob(void 0!==n?[n,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var i=window.URL.createObjectURL(a),o=document.createElement("a");o.style.display="none",o.href=i,o.setAttribute("download",t),void 0===o.download&&o.setAttribute("target","_blank"),document.body.appendChild(o),o.click(),setTimeout((function(){document.body.removeChild(o),window.URL.revokeObjectURL(i)}),0)}}},"20d2":function(e,t,r){"use strict";var n=r("d234"),a=r.n(n);t.default=a.a},3534:function(e,t,r){e.exports=r.p+"assets/img/a61603aa.jpg"},"4b4b":function(e,t,r){},"4ba5":function(e,t,r){"use strict";var n=r("967e"),a=r.n(n),i=(r("96cf"),r("3b8d")),o=(r("7f7f"),r("7514"),r("ac6a"),r("365c")),s=r("9c0d"),c={props:["createTime","devsInfo","action"],name:"",computed:{devList:function(){var e=this,t=0,r=0,n=[];return this.devsInfo.forEach((function(a){var i=e.data.find((function(e){return e.deviceId===a.deviceId}));i||(i={isLoad:2});var o=Object.assign({},a,i),c=s.g.find((function(e){return e.id==o.isLoad}));o.stateName=c?c.pushState:"",n.push(o),2==o.isLoad?r+=1:1==o.isLoad||(t+=1)})),r>0?this.devAllState=-1:t>=1?(this.devAllState=t,clearInterval(this.openSetIntVal)):(this.devAllState=0,clearInterval(this.openSetIntVal)),n}},data:function(){return{devAllState:-1,showDeviceListPush:!0,openSetIntVal:null,data:[]}},mounted:function(){this.createInterval(),this.devLogFindAll()},activated:function(){this.createInterval(),this.devLogFindAll()},beforeDestroy:function(){clearInterval(this.openSetIntVal)},methods:{createInterval:function(){var e=this;clearInterval(this.openSetIntVal),this.openSetIntVal=setInterval((function(){e.devLogFindAll()}),1e3),this.devLogFindAll()},actionName:function(e){var t=s.e.find((function(t){return t.action==e}));return t?t.name:""},devLogFindAll:function(){var e=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.devLogFindAllRealTime({startTime:this.createTime,endTime:this.createTime},"non");case 2:(t=e.sent)&&(this.data=t.data||[]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),close:function(){this.$emit("close")},pushAgain:function(e){var t=this;this.data.forEach((function(r,n){r.deviceId===e.deviceId&&t.$set(t.data[n],"isLoad",2)})),o.c.personPushAgain(e,"non")&&this.createInterval()}}},u=r("b181"),l=r("2877"),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("Modal",{class:e.$style.modal,attrs:{closable:!1,"mask-closable":!1,draggable:"",width:"700"},model:{value:e.showDeviceListPush,callback:function(t){e.showDeviceListPush=t},expression:"showDeviceListPush"}},[-1===e.devAllState?r("p",{class:e.$style.title,staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:18,color:"#2b85e4"}}),r("span",{staticStyle:{color:"#2b85e4","margin-left":"10px"}},[e._v(e._s(e.$t("routerMenu.devicePushPersonInfo")))])],1):0===e.devAllState?r("p",{class:e.$style.title,staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:"md-checkmark-circle",size:18,color:"#19be6b"}}),r("span",{staticStyle:{color:"#2b85e4","margin-left":"10px"}},[e._v(e._s(e.$t("routerMenu.devicePushPersonInfo2")))])],1):e.devAllState>0?r("p",{class:e.$style.title,staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[r("Icon",{attrs:{type:"md-alert",size:18,color:"#ff9900"}}),r("span",{staticStyle:{color:"#2b85e4","margin-left":"10px"}},[e._v(e._s(e.devAllState)+"\n            "+e._s(e.$t("routerMenu.devicePushPersonInfo3")))])],1):e._e(),r("ul",{class:e.$style.ul},e._l(e.devList,(function(t,n){return r("li",{key:t.deviceId+t.action},[r("div",{class:e.$style.devImgs},[r("img",{staticStyle:{width:"70px",height:"70px"},attrs:{src:"/assets/img/117341a7.png",alt:""}}),1==t.isLoad?r("Icon",{attrs:{type:"md-checkmark-circle",size:24,color:"#19be6b"}}):e._e(),1!=t.isLoad&&2!=t.isLoad?r("Icon",{attrs:{type:"md-alert",size:24,color:"#ed4014"}}):e._e(),2==t.isLoad?r("Spin",{attrs:{fix:""}},[r("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:28}})],1):e._e()],1),r("h4",[e._v(e._s(t.localName))]),r("p",[e._v(e._s(t.deviceId))]),r("p",[e._v(e._s(e.actionName(t.action)))]),r("span",[e._v(e._s(t.stateName))]),r("Button",{attrs:{type:"info",icon:"md-refresh",size:"small",disabled:1==t.isLoad||2==t.isLoad},on:{click:function(r){return e.pushAgain(t)}}},[e._v(e._s(e.$t("routerMenu.devicePushPersonInfo3")))])],1)})),0),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.devAllState<0},on:{click:e.close}},[e._v(e._s(e.$t("routerMenu.close")))])],1)])}),[],!1,(function(e){this.$style=u.default.locals||u.default}),null,null);t.a=d.exports},"5c70":function(e,t,r){},7983:function(e,t,r){},"7b0a":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"j",(function(){return i})),r.d(t,"m",(function(){return o})),r.d(t,"i",(function(){return s})),r.d(t,"l",(function(){return c})),r.d(t,"e",(function(){return u})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return d})),r.d(t,"f",(function(){return p})),r.d(t,"k",(function(){return f})),r.d(t,"g",(function(){return m})),r.d(t,"h",(function(){return h})),r("a481"),r("c5f6");var n=function(e,t,r){""===t||null==t?r(new Error($t("routerMenu.error21"))):r()},a=function(e,t,r){!t&&0!==t||null==t?r(new Error($t("routerMenu.error23"))):r()},i=function(e,t,r){!t&&0!==t||/^[0-9]*$/.test(t)?r():r(new Error($t("routerMenu.error27")))},o=function(e,t,r){!t&&0!==t||/^\d+$/.test(t)?r():r(new Error($t("routerMenu.error28")))},s=function(e,t,r){t&&!/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(t.toUpperCase())?r(new Error($t("routerMenu.error32"))):r()},c=function(e,t,r){!t&&0!==t||void 0==t||/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(t)?r():r(new Error($t("routerMenu.error34")))},u=function(e,t,r){(t||0===t)&&/^[0-9]*$/.test(t)&&Number(t)>0?r():r(new Error($t("routerMenu.error35")))},l=function(e,t,r){""!==t&&/^\d+(\.\d+)?$/.test(t)?r():r(new Error($t("routerMenu.error36")))},d=function(e,t,r){(t||0===t)&&0!=t&&/^\d+(\.\d+)?$/.test(t)?r():r(new Error($t("routerMenu.error37")))},p=function(e){return(e||0===e)&&/^[0-9]*$/.test(e)?parseInt(e):0},f=function(e,t,r){t&&t.length<3?r(new Error($t("routerMenu.error39"))):r()},m=function(e,t,r){t&&!/^(254|252|248|240|224|192|128|0)\.0\.0\.0$|^(255\.(254|252|248|240|224|192|128|0)\.0\.0)$|^(255\.255\.(254|252|248|240|224|192|128|0)\.0)$|^(255\.255\.255\.(254|252|248|240|224|192|128|0))$/.test(t.toUpperCase())?r(new Error($t("routerMenu.error44"))):r()},h=function(e,t,r){!t&&0!==t||/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(t.toUpperCase())?r():r(new Error($t("routerMenu.error45")))}},"7cb1":function(e,t,r){"use strict";var n=r("bd86");r("456d"),r("ac6a"),r("7f7f"),r("34ef"),t.a=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xlsx";r.unshift({}),r.unshift({title:e});var i=t.map((function(e){return r[1][e.value]=e.name,e.value})),o=[];r.map((function(e,t){return i.map((function(r,n){return Object.assign({},{v:"index"===r&&t>1?t-1:e[r],s:{font:{name:"Arial",sz:10},alignment:{horizontal:"center",vertical:"center",wrapText:!0},border:1===t?{bottom:{style:"thin",color:{rgb:"42a642"}},top:{style:"thin",color:{rgb:"42a642"}}}:{}},position:(n>25?function(e){for(var t="",r=0;e>0;)r=e%26+1,t=String.fromCharCode(r+64)+t,e=(e-r)/26;return t}(n):String.fromCharCode(65+n))+(t+1)})}))})).reduce((function(e,t){return e.concat(t)})).forEach((function(e,t){return o[e.position]={v:e.v,s:e.s}}));var s=Object.keys(o);o.A1.v=r[0].title,o.A1.s={font:{name:"Arial",sz:12,italic:!1,underline:!1,bold:!0},alignment:{horizontal:"center",vertical:"center"}};var c="A".concat(r.length);r[r.length-1].total&&(o[c].v=r[r.length-1].total,o[c].s={font:{name:"Arial",sz:12,italic:!1,underline:!1,bold:!0},alignment:{horizontal:"center",vertical:"center"}}),o["!merges"]=[{s:{c:0,r:0},e:{c:t.length-1||1,r:0}}],r[r.length-1].total&&o["!merges"].push({s:{c:0,r:r.length-1},e:{c:t.length-1||1,r:r.length-1}});var u=t.map((function(e){return{wpx:e.width}})),l=t.map((function(e){return{hpx:e.height}}));t.push(t[t.length-1]),o["!cols"]=u,o["!rows"]=l;var d={SheetNames:[e],Sheets:Object(n.a)({},e,Object.assign({},o,{"!ref":s[0]+":"+s[s.length-1]}))};return new Blob([function(e){if("undefined"!=typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}for(t=new Array(e.length),n=0;n!=e.length;++n)t[n]=255&e.charCodeAt(n);return t}(XLSX.write(d,{"!rows":l,bookType:a,bookSST:!1,type:"binary",cellStyles:!0}))],{type:""})}},"86af":function(e,t,r){"use strict";var n=r("4b4b"),a=r.n(n);t.default=a.a},"9c0d":function(e,t,r){"use strict";var n=[{id:0,name:"routerMenu.personType1"},{id:1,name:"routerMenu.personType2"}],a=[{id:0,name:"routerMenu.sex1"},{id:1,name:"routerMenu.sex2"},{id:2,name:"routerMenu.sex3"}],i=[{id:0,name:"routerMenu.moonChargeType1"},{id:1,name:"routerMenu.allow"},{id:2,name:"routerMenu.deny"},{id:3,name:"routerMenu.unregistered"}],o=[{id:0,name:"routerMenu.listTypeLs1"},{id:1,name:"routerMenu.listTypeLs2"},{id:2,name:"routerMenu.listTypeLs3"},{id:3,name:"routerMenu.listTypeLs4"}],s=[{id:0,name:"routerMenu.isLoadLsMsg1",state:"routerMenu.isLoadLsMsg2",pushState:"routerMenu.isLoadLsMsg3"},{id:1,name:"routerMenu.isLoadLsMsg4",state:"routerMenu.isLoadLsMsg5",pushState:"routerMenu.isLoadLsMsg6"},{id:2,pushState:"routerMenu.isLoadLsMsg7"},{id:-1,pushState:"routerMenu.isLoadLsMsg8"},{id:-2,pushState:"routerMenu.isLoadLsMsg9"},{id:-3,pushState:"routerMenu.isLoadLsMsg10"}],c=($t("routerMenu.unregistered"),[{id:0,name:"routerMenu.identityCard"}]),u=[{id:0,name:"公用卡号 "},{id:1,name:"自动生成 "},{id:2,name:"手动输入 "},{id:3,name:"不使用门禁号"}],l=[{id:1,name:"routerMenu.entrance"},{id:2,name:"routerMenu.exit"}],d=[{id:0,name:"十进制构成卡号"},{id:1,name:"十六进制构成卡号"}],p=[{id:1,name:"汉"},{id:2,name:"蒙古"},{id:3,name:"回"},{id:4,name:"藏"},{id:5,name:"维吾尔"},{id:6,name:"苗"},{id:7,name:"彝"},{id:8,name:"壮"},{id:9,name:"布依"},{id:10,name:"朝鲜"},{id:11,name:"满"},{id:12,name:"侗"},{id:13,name:"瑶"},{id:14,name:"白"},{id:15,name:"土家"},{id:16,name:"哈尼"},{id:17,name:"哈萨克"},{id:18,name:"傣"},{id:19,name:"黎"},{id:20,name:"傈僳"},{id:21,name:"佤"},{id:22,name:"畲"},{id:23,name:"高山"},{id:24,name:"拉祜"},{id:25,name:"水"},{id:26,name:"东乡"},{id:27,name:"纳西"},{id:28,name:"景颇"},{id:29,name:"柯尔克孜"},{id:30,name:"土"},{id:31,name:"达斡尔"},{id:32,name:"仫佬"},{id:33,name:"羌"},{id:34,name:"布朗"},{id:35,name:"撒拉"},{id:36,name:"毛南"},{id:37,name:"仡佬"},{id:38,name:"锡伯"},{id:39,name:"阿昌"},{id:40,name:"普米"},{id:41,name:"塔吉克"},{id:42,name:"怒"},{id:43,name:"乌孜别克"},{id:44,name:"俄罗斯"},{id:45,name:"鄂温克"},{id:46,name:"德昂"},{id:47,name:"保安"},{id:48,name:"裕固"},{id:49,name:"京"},{id:50,name:"塔塔尔"},{id:51,name:"独龙"},{id:52,name:"鄂伦春"},{id:53,name:"赫哲"},{id:54,name:"门巴"},{id:55,name:"珞巴"},{id:56,name:"基诺"},{id:57,name:"其他"}],f=[{id:1,name:"routerMenu.veriftyType1"},{id:2,name:"routerMenu.veriftyType2"},{id:3,name:"routerMenu.veriftyType3"},{id:4,name:"routerMenu.veriftyType4"}],m=[{id:1,name:"HQ"},{id:3,name:"DA"}],h=[{action:"SetDoorCondition",name:"设置开门条件"},{action:"SetSound",name:"设置提示音及界面"},{action:"Subscribe",name:"设置 HTTP 订阅"},{action:"Unsubscribe",name:"取消 HTTP 订阅"},{action:"AddPerson",name:"单个名单添加"},{action:"DeletePerson",name:"单、多名单删除"},{action:"AddPersons",name:"多个名单添加"},{action:"EditPerson",name:"名单编辑修改"},{action:"OpenDoor",name:"开门控制"}],v=[{id:"2",name:"routerMenu.pushToDeviceStateLs1"},{id:"1",name:"routerMenu.pushToDeviceStateLs2"},{id:"-1",name:"routerMenu.isLoadLsMsg8"},{id:"0",name:"routerMenu.pushToDeviceStateLs4"},{id:"405",name:"routerMenu.pushToDeviceStateLs5"},{id:"406",name:"routerMenu.pushToDeviceStateLs6"},{id:"407",name:"routerMenu.pushToDeviceStateLs7"}],g=[{id:1,name:"routerMenu.personCudLsMsg1"},{id:-1,name:"routerMenu.personCudLsMsg2"}];r.d(t,"g",(function(){return s})),r.d(t,"a",(function(){return l})),r.d(t,"m",(function(){return a})),r.d(t,"n",(function(){return i})),r.d(t,"c",(function(){return d})),r.d(t,"d",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"h",(function(){return o})),r.d(t,"k",(function(){return n})),r.d(t,"i",(function(){return p})),r.d(t,"o",(function(){return f})),r.d(t,"f",(function(){return m})),r.d(t,"e",(function(){return h})),r.d(t,"l",(function(){return v})),r.d(t,"j",(function(){return g}))},"9fe0":function(e,t,r){},a09b:function(e,t,r){"use strict";r("7f7f"),r("28a5"),r("ac6a");var n=r("bd86"),a=(r("c5f6"),r("099a")),i=r("5250"),o=r("3a27"),s="ivu-progress",c={name:"Progress",components:{Icon:i.a},props:{percent:{type:Number,default:0},successPercent:{type:Number,default:0},status:{validator:function(e){return Object(o.f)(e,["normal","active","wrong","success"])},default:"normal"},hideInfo:{type:Boolean,default:!1},strokeWidth:{type:Number,default:10},vertical:{type:Boolean,default:!1},strokeColor:{type:[String,Array]},textInside:{type:Boolean,default:!1}},data:function(){return{currentStatus:this.status}},computed:{isStatus:function(){return"wrong"==this.currentStatus||"success"==this.currentStatus},statusIcon:function(){var e="";switch(this.currentStatus){case"wrong":e="ios-close-circle";break;case"success":e="ios-checkmark-circle"}return e},bgStyle:function(){var e=this.vertical?{height:"".concat(this.percent,"%"),width:"".concat(this.strokeWidth,"px")}:{width:"".concat(this.percent,"%"),height:"".concat(this.strokeWidth,"px")};return this.strokeColor&&("string"==typeof this.strokeColor?e["background-color"]=this.strokeColor:e["background-image"]="linear-gradient(to right, ".concat(this.strokeColor[0]," 0%, ").concat(this.strokeColor[1]," 100%)")),e},successBgStyle:function(){return this.vertical?{height:"".concat(this.successPercent,"%"),width:"".concat(this.strokeWidth,"px")}:{width:"".concat(this.successPercent,"%"),height:"".concat(this.strokeWidth,"px")}},wrapClasses:function(){var e;return["".concat(s),"".concat(s,"-").concat(this.currentStatus),(e={},Object(n.a)(e,"".concat(s,"-show-info"),!this.hideInfo&&!this.textInside),Object(n.a)(e,"".concat(s,"-vertical"),this.vertical),e)]},textClasses:function(){return"".concat(s,"-text")},textInnerClasses:function(){return"".concat(s,"-text-inner")},outerClasses:function(){return"".concat(s,"-outer")},innerClasses:function(){return"".concat(s,"-inner")},bgClasses:function(){return"".concat(s,"-bg")},successBgClasses:function(){return"".concat(s,"-success-bg")}},created:function(){this.handleStatus()},methods:{handleStatus:function(e){e?(this.currentStatus="normal",this.$emit("on-status-change","normal")):100==parseInt(this.percent,10)&&(this.currentStatus="success",this.$emit("on-status-change","success"))}},watch:{percent:function(e,t){e<t?this.handleStatus(!0):this.handleStatus()},status:function(e){this.currentStatus=e}}},u=r("2877"),l=Object(u.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:e.wrapClasses},[r("div",{class:e.outerClasses},[r("div",{class:e.innerClasses},[r("div",{class:e.bgClasses,style:e.bgStyle},[e.textInside?r("div",{staticClass:"ivu-progress-inner-text"},[e._v(e._s(e.percent)+"%")]):e._e()]),r("div",{class:e.successBgClasses,style:e.successBgStyle})])]),e.hideInfo||e.textInside?e._e():r("span",{class:e.textClasses},[e._t("default",[e.isStatus?r("span",{class:e.textInnerClasses},[r("Icon",{attrs:{type:e.statusIcon}})],1):r("span",{class:e.textInnerClasses},[e._v("\n                "+e._s(e.percent)+"%\n            ")])])],2)])}),[],!1,null,null,null).exports,d={name:"UploadList",components:{Icon:a.a,iProgress:l},props:{files:{type:Array,default:function(){return[]}}},data:function(){return{prefixCls:"ivu-upload"}},methods:{fileCls:function(e){return["".concat("ivu-upload","-list-file"),Object(n.a)({},"".concat("ivu-upload","-list-file-finish"),"finished"===e.status)]},handleClick:function(e){this.$emit("on-file-click",e)},handlePreview:function(e){this.$emit("on-file-preview",e)},handleRemove:function(e){this.$emit("on-file-remove",e)},format:function(e){var t=e.name.split(".").pop().toLocaleLowerCase()||"",r="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(t)>-1&&(r="ios-image"),["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(t)>-1&&(r="ios-film"),["mp3","wav","wma","ogg","aac","flac"].indexOf(t)>-1&&(r="ios-musical-notes"),["doc","txt","docx","pages","epub","pdf"].indexOf(t)>-1&&(r="md-document"),["numbers","csv","xls","xlsx"].indexOf(t)>-1&&(r="ios-stats"),["keynote","ppt","pptx"].indexOf(t)>-1&&(r="ios-videocam"),r},parsePercentage:function(e){return parseInt(e,10)}}},p=Object(u.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ul",{class:[e.prefixCls+"-list"]},e._l(e.files,(function(t){return r("li",{class:e.fileCls(t),on:{click:function(r){return e.handleClick(t)}}},[r("span",{on:{click:function(r){return e.handlePreview(t)}}},[r("Icon",{attrs:{type:e.format(t)}}),e._v(" "+e._s(t.name)+"\n\t\t")],1),r("Icon",{directives:[{name:"show",rawName:"v-show",value:"finished"===t.status,expression:"file.status === 'finished'"}],class:[e.prefixCls+"-list-remove"],attrs:{type:"ios-close"},nativeOn:{click:function(r){return e.handleRemove(t)}}}),r("transition",{attrs:{name:"fade"}},[t.showProgress?r("i-progress",{attrs:{"stroke-width":2,percent:e.parsePercentage(t.percentage),status:"finished"===t.status&&t.showProgress?"success":"normal"}}):e._e()],1)],1)})),0)}),[],!1,null,null,null).exports;function f(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(e){return t}}function m(e){if("undefined"!=typeof XMLHttpRequest){var t=new XMLHttpRequest,r=e.action;t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).map((function(t){n.append(t,e.data[t])})),n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){if(t.status<200||t.status>=300)return e.onError(function(e,t,r){var n="fail to post ".concat(e," ").concat(r.status,"'"),a=new Error(n);return a.status=r.status,a.method="post",a.url=e,a}(r,0,t),f(t));e.onSuccess(f(t))},t.open("post",r,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var a=e.headers||{};for(var i in a)a.hasOwnProperty(i)&&null!==a[i]&&t.setRequestHeader(i,a[i]);t.send(n)}}r("456d");var h=r("2507"),v=r("9f81"),g={name:"Upload",mixins:[h.a,v.a],components:{UploadList:p},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},data:{type:Object},name:{type:String,default:"file"},withCredentials:{type:Boolean,default:!1},showUploadList:{type:Boolean,default:!0},type:{type:String,validator:function(e){return Object(o.f)(e,["select","drag"])},default:"select"},format:{type:Array,default:function(){return[]}},accept:{type:String},maxSize:{type:Number},beforeUpload:Function,onProgress:{type:Function,default:function(){return{}}},onSuccess:{type:Function,default:function(){return{}}},onError:{type:Function,default:function(){return{}}},onRemove:{type:Function,default:function(){return{}}},onPreview:{type:Function,default:function(){return{}}},onExceededSize:{type:Function,default:function(){return{}}},onFormatError:{type:Function,default:function(){return{}}},defaultFileList:{type:Array,default:function(){return[]}},paste:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{prefixCls:"ivu-upload",dragOver:!1,fileList:[],tempIndex:1}},computed:{classes:function(){var e;return["".concat("ivu-upload"),(e={},Object(n.a)(e,"".concat("ivu-upload","-select"),"select"===this.type),Object(n.a)(e,"".concat("ivu-upload","-drag"),"drag"===this.type),Object(n.a)(e,"".concat("ivu-upload","-dragOver"),"drag"===this.type&&this.dragOver),e)]}},methods:{handleClick:function(){this.itemDisabled||this.$refs.input.click()},handleChange:function(e){var t=e.target.files;t&&(this.uploadFiles(t),this.$refs.input.value=null)},onDrop:function(e){this.dragOver=!1,this.itemDisabled||this.uploadFiles(e.dataTransfer.files)},handlePaste:function(e){this.itemDisabled||this.paste&&this.uploadFiles(e.clipboardData.files)},uploadFiles:function(e){var t=this,r=Array.prototype.slice.call(e);this.multiple||(r=r.slice(0,1)),0!==r.length&&r.forEach((function(e){t.upload(e)}))},upload:function(e){var t=this;if(!this.beforeUpload)return this.post(e);this.beforeUpload(e,(function(r){r&&t.post(e)}))},post:function(e){var t=this;if(this.format.length){var r=e.name.split(".").pop().toLocaleLowerCase();if(!this.format.some((function(e){return e.toLocaleLowerCase()===r})))return this.onFormatError(e,this.fileList),!1}if(this.maxSize&&e.size>1024*this.maxSize)return this.onExceededSize(e,this.fileList),!1;this.handleStart(e),(new FormData).append(this.name,e),m({headers:this.headers,withCredentials:this.withCredentials,file:e,data:this.data,filename:this.name,action:this.action,onProgress:function(r){t.handleProgress(r,e)},onSuccess:function(r){t.handleSuccess(r,e)},onError:function(r,n){t.handleError(r,n,e)}})},handleStart:function(e){e.uid=Date.now()+this.tempIndex++;var t={status:"uploading",name:e.name,size:e.size,percentage:0,uid:e.uid,showProgress:!0};this.fileList.push(t),this.$emit("onProgress",{_file:t,fileList:this.fileList})},getFile:function(e){var t;return this.fileList.every((function(r){return!(t=e.uid===r.uid?r:null)})),t},handleProgress:function(e,t){var r=this.getFile(t);this.onProgress(e,r,this.fileList),r.percentage=e.percent||0,this.$emit("onProgress",{_file:r,fileList:this.fileList})},handleSuccess:function(e,t){var r=this.getFile(t);r&&(r.status="finished",r.response=e,this.onSuccess(e,r,this.fileList),this.dispatch("FormItem","on-form-change",r),setTimeout((function(){r.showProgress=!1}),1e3))},handleError:function(e,t,r){var n=this.getFile(r),a=this.fileList;n.status="fail",a.splice(a.indexOf(n),1),this.onError(e,t,r)},handleRemove:function(e){var t=this.fileList;t.splice(t.indexOf(e),1),this.onRemove(e,t)},handlePreview:function(e){"finished"===e.status&&this.onPreview(e)},clearFiles:function(){this.fileList=[]}},watch:{defaultFileList:{immediate:!0,handler:function(e){var t=this;this.fileList=e.map((function(e){return e.status="finished",e.percentage=100,e.uid=Date.now()+t.tempIndex++,e}))}}}},b=Object(u.a)(g,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:[e.prefixCls]},[r("div",{class:e.classes,on:{click:e.handleClick,drop:function(t){return t.preventDefault(),e.onDrop(t)},paste:e.handlePaste,dragover:function(t){t.preventDefault(),e.dragOver=!0},dragleave:function(t){t.preventDefault(),e.dragOver=!1}}},[r("input",{ref:"input",class:[e.prefixCls+"-input"],attrs:{type:"file",multiple:e.multiple,accept:e.accept},on:{change:e.handleChange}}),e._t("default")],2),e._t("tip"),e.showUploadList?r("upload-list",{attrs:{files:e.fileList},on:{"on-file-remove":e.handleRemove,"on-file-preview":e.handlePreview}}):e._e()],2)}),[],!1,null,null,null).exports;t.a=b},a4f6:function(e,t,r){"use strict";var n=r("5c70");r.n(n).a},b181:function(e,t,r){"use strict";var n=r("126f"),a=r.n(n);t.default=a.a},d160:function(e,t,r){"use strict";function n(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",r=t.length,n="",a=0;a<e;a++)n+=t.charAt(Math.floor(Math.random()*r));return n}r.d(t,"a",(function(){return n}))},d234:function(e,t,r){e.exports={listInfo:"listInfo_listInfo_3HSuv",formRow:"listInfo_formRow_1QGoN",formRowFull:"listInfo_formRowFull_2gf7h",dateTimeItem:"listInfo_dateTimeItem_zpM9L",timeItem:"listInfo_timeItem_5TDx_",bigWidthInput:"listInfo_bigWidthInput_25OZT",uploadItem:"listInfo_uploadItem_2rqd-",checkboxItem:"listInfo_checkboxItem_VDed1",listInfoUpload:"listInfo_listInfoUpload_1JqBL",delete:"listInfo_delete_2jSOF",footer:"listInfo_footer_219zd"}},dedb:function(e,t,r){e.exports={bigImg:"index_bigImg_1_dIP"}},ed12:function(e,t,r){"use strict";var n=r("dedb"),a=r.n(n);t.default=a.a},f6da:function(e,t,r){"use strict";var n=r("9fe0");r.n(n).a}}]);