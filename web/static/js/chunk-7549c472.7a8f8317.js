(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7549c472"],{"26a1":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return i}));var s=n("a026").default.prototype.$isServer,a=!s&&document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)},i=!s&&document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}},6157:function(t,e,n){"use strict";n.r(e);var s,a=n("967e"),i=n.n(a),o=(n("96cf"),n("3b8d")),r=(n("7514"),n("bd86")),l=(n("456d"),n("6c7b"),n("20d6"),n("ac6a"),n("6b54"),n("b76a")),c=n.n(l),u=n("26a1"),p=n("365c"),d=n("0a91"),h=n("56d7"),f=n("5fa5"),y=n("bbfb"),m=n("7f11"),_=(n("2f62"),{}),v=(s={props:["userInfo"],components:{iHeaderFullscreen:d.a,draggable:c.a},data:function(){return{openDelay:0,type:8,drawerValue:!1,list:[],qyList:[],hxList:[],searchForm:{channelName:"",pageSize:1e3,searchType:0,pageNum:1},ws:[],imgHeignt:"100%",imgWidth:"100%",camType:null,camUserName:"",camPwd:"",zsWidth:380,startInterval:null}},computed:{ulClass:function(){var t=this.$style.ul8;return 4===this.type&&(t=this.$style.ul4),8===this.type&&(t=this.$style.ul8),9===this.type&&(t=this.$style.ul9),12===this.type&&(t=this.$style.ul12),16===this.type&&(t=this.$style.ul16),this.setImgSize(),t}},watch:{type:function(){var t=Object(o.a)(i.a.mark((function t(e){var n,s,a,r,l=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=0;n<this.list.length;n++)3!=this.camType&&(this.list[n].id=100*Math.random());if((s=e-this.list.length)>0)for(a=0;a<s;a++)this.list.push({id:Math.random().toString(36).slice(-8),openDelay:0});else if(s<0)for(r=s;r<0;r++)this.list[this.list.length-1].uuid||this.list.splice(this.list.length-1,1);return t.next=5,Object(h.sleep)(100);case 5:this.list.forEach(function(){var t=Object(o.a)(i.a.mark((function t(e,n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l.openOrReshoot(n,"offOrOn"),t.next=3,Object(h.sleep)(500);case 3:l.openOrReshoot(n,"offOrOn");case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},created:function(){var t=this;window.addEventListener("beforeunload",(function(e){return t.beforeunloadFn(e)}))},destroyed:function(){var t=this;window.removeEventListener("beforeunload",(function(e){return t.beforeunloadFn(e)}))},mounted:function(){var t=this;this.getCarParams(),clearInterval(this.startInterval),this.startInterval=setInterval(Object(o.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.channelStatusReport();case 2:(n=e.sent)&&t.list.map((function(t){var e=n.dataList.findIndex((function(e){return t.macAddress===e.mac}));t.isLine=!!n.dataList[e]&&n.dataList[e].isLine}));case 4:case"end":return e.stop()}}),e)}))),18e4),this.list.length||(this.list=Array(this.type).fill(!0).map((function(t){return{id:100*Math.random()}}))),Object(u.b)(window,"resize",this.setImgSize)},activated:function(){this.openWs(),clearInterval(this.startInterval)},deactivated:function(){this.closeWs(),clearInterval(this.startInterval)},beforeDestroy:function(){this.closeWs(),clearInterval(this.startInterval),Object(u.a)(window,"resize",this.setImgSize)}},Object(r.a)(s,"destroyed",(function(){clearInterval(this.startInterval)})),Object(r.a)(s,"methods",{getCarParams:function(){var t=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.getCarParams();case 2:(e=t.sent)&&(this.camType=parseInt(e.data.CAM_TYPE),this.camUserName=e.data.CAM_USER,this.camPwd=e.data.CAM_PWD,this.getChannelList());case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),openSetInterval:function(t){var e=this;this.$set(this.list[t],"openDelay",4),window.MYSetInterval||(window.MYSetInterval=[]),window.MYSetInterval[t]=setInterval((function(){e.list[t].openDelay>0?e.$set(e.list[t],"openDelay",e.list[t].openDelay-1):clearInterval(window.MYSetInterval[t])}),1e3)},handleCloseTag:function(){var t=this;this.$Modal.confirm({title:$t("routerMenu.quit"),content:$t("routerMenu.wantQuit"),onOk:function(){t.$emit("off")}})},getChannelList:function(){var t=Object(o.a)(i.a.mark((function t(){var e,n,s,a=this;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.channelFind(this.searchForm);case 2:return e=t.sent,t.next=5,p.a.channelStatusReport();case 5:n=t.sent,e&&(s=e.data.list.filter((function(t){return!!t.camera&&t.channelTypeId})),length=s.length,length<=9&&length>8&&(this.type=9),length<=12&&length>9&&(this.type=12),length>12&&(this.type=16),this.ws=new Array(s.length),s.forEach((function(t,e){t.img="",t.play_londing=!1,t.play=0;var s=n.dataList.findIndex((function(e){return t.macAddress===e.mac}));t.isLine=n.dataList[s].isLine,a.list.splice(e,1,t)})),this.openWs());case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),initVideo:function(t,e,n){var s=this,a=document.getElementById(t);this.ws[n]=new window.Jessibuca({container:a,videoBuffer:.2,isResize:!1,isNotMute:!1,timeout:10}),this.ws[n].on("load",(function(){s.ws[n].play(e),s.$set(s.list[n],"play",1),s.$set(s.list[n],"play_londing",!1)})),this.ws[n].on("error",(function(){this.$set(this.list[n],"play",0),this.$set(this.list[n],"play_londing",!1)})),this.ws[n].on("timeout",(function(){})),this.ws[n].on("close",(function(){this.$set(this.list[n],"play",1),this.$set(this.list[n],"play_londing",!1)}))},openWs:function(){var t=Object(o.a)(i.a.mark((function t(){var e,n,s,a,o,r,l,c,u,p,d,y,m,_,v,g,w=this,b=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=b.length>0&&void 0!==b[0]?b[0]:"all",n=this,"all"!==e){t.next=6;break}for(s=0;s<this.list.length;s++)this.list[s].uuid&&this.openWs(s);t.next=64;break;case 6:if(!this.list[e]||!this.list[e].camera){t.next=64;break}if(0!=n.camType){t.next=23;break}this.$set(this.list[e],"play_londing",!0),a=this.list[e].camera,o=80,r="admin",l="admin",c=JSON.stringify({type:"get_live_stream_type",module:"BUS_WEB_REQUEST"}),u="http://".concat(a,":").concat(o,"/request.php"),(p=new XMLHttpRequest).open("POST",u),p.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),p.send(c),p.onreadystatechange=function(){var t=p.readyState,n=p.status;if(4==t)if(n>=200&&n<300||304===n){var s=JSON.parse(p.responseText),i=s.body.port,o=f.a.decode(s.body.pubkey),c=new JSEncrypt;c.setPublicKey(o);var u=r+":"+l,d=encodeURIComponent(c.encrypt(u.toString())),h="ws://"+a+":"+i+"/ws.flv?token="+d;h&&w.initVideo("img__v".concat(e),h,e)}else w.$set(w.list[e],"play_londing",!1)},t.next=64;break;case 23:if(1!=n.camType){t.next=27;break}this.playHxVideo(e),t.next=64;break;case 27:if(2!=n.camType){t.next=38;break}return d=location.hostname,y="8083",m=this.list[e].camera,this.ws[e]=new Rtsp2WPlayer({serverPath:"http://".concat(d,":").concat(y),containerId:"video__qy".concat(e),logEnabled:!1,style:{controls:!1},onconnectionstatechange:function(t){"connected"===t&&n.$set(n.list[e],"play",1),document.querySelectorAll("#video__qy".concat(e)).forEach((function(t){for(var e=t.querySelectorAll("video"),n=e.length-1;n>0;n--)t.removeChild(e[n])})),"disconnected"!==t&&"failed"!==t||(n.$set(n.list[e],"play",0),setTimeout((function(){w.playQyVideo("rtsp://".concat(m,":50000/video"),e)}),5e3))}}),t.next=35,Object(h.sleep)(100);case 35:this.playQyVideo("rtsp://".concat(m,":50000/video"),e),t.next=64;break;case 38:if(3!=n.camType){t.next=51;break}return t.next=41,Object(h.sleep)(100);case 41:return this.$set(this.list[e],"play_londing",!0),_=this.list[e].camera,this.$set(this.list[e],"play",1),t.next=48,Object(h.sleep)(1e3);case 48:this.$nextTick((function(){w.twLogin(_,e)})),t.next=64;break;case 51:if(4!=n.camType){t.next=64;break}return t.next=55,Object(h.sleep)(500);case 55:this.$set(this.list[e],"play_londing",!0),v=this.list[e].camera,g=document.getElementById("sjliveVideo_".concat(e)),this.ws[e]=mpegts.createPlayer({type:"flv",hasVideo:!0,hasAudio:!1,isLive:!0,url:"ws://"+v+":8081/live_video0.flv"},{enableStashBuffer:!1,autoCleanupSourceBuffer:!0,stashInitialSize:128,enableWorker:!0,isLive:!0,liveBufferLatencyChasing:!0,liveBufferLatencyMaxLatency:.5,liveBufferLatencyMinRemain:.1,liveSync:!0,liveSyncMaxLatency:.1,liveSyncTargetLatency:.05,liveSyncPlaybackRate:1.5}),this.ws[e].attachMediaElement(g),this.ws[e].load(),this.ws[e].play(),n.$set(n.list[e],"play",1),n.$set(n.list[e],"play_londing",!1);case 64:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),playHxVideo:function(t){this.$set(this.list[t],"play_londing",!0),this.ws[t]&&this.ws[t].close&&this.ws[t].readyState!=WebSocket.CLOSED&&this.ws[t].close();var e=this.list[t].camera;if(e)try{this.ws[t]=new WebSocket("ws://".concat(e,":9999")),void 0==this.ws[t+"_close"]&&(this.ws[t+"_close"]=!1),_[t]||(_[t]={renderer:new m.a}),this.setupWebSocketHandlers(t)}catch(e){this.scheduleReconnect(t)}else this.updateCameraStatus(t,0,!1)},setupWebSocketHandlers:function(t){var e=this,n=this.ws[t],s=this;n.onopen=function(e){s.updateCameraStatus(t,1,!1)},n.onmessage=function(n){e.handleWebSocketMessage(t,n)},n.onclose=function(e){s.list[t].isLine?s.ws[t+"_close"]||s.scheduleReconnect(t):s.updateCameraStatus(t,0,!1)},n.onerror=function(n){e.list[t].isLine?e.ws[t+"_close"]||s.scheduleReconnect(t):s.updateCameraStatus(t,0,!1)}},handleWebSocketMessage:function(t,e){_[t].renderer.render(e.data,document.getElementById("img__".concat(t)))},scheduleReconnect:function(t){var e=this;!this.ws[t]||this.ws[t].lockReconnect||this.ws[t+"_close"]||(this.ws[t].lockReconnect=!0,setTimeout((function(){e.playHxVideo(t),e.ws[t].lockReconnect=!1}),2e3))},updateCameraStatus:function(t,e,n){this.$set(this.list[t],"play",e),this.$set(this.list[t],"play_londing",n)},twLogin:function(){var t=Object(o.a)(i.a.mark((function t(e,n){var s,a,o,r,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=this,a=document.getElementById("canvas__tw".concat(n)),t.next=4,p.a.getTwInfo({cameraIp:e});case 4:return o=t.sent,t.next=7,p.a.getTwPortConfig({cameraIp:e});case 7:r=t.sent,o.data,r.data;try{r.data?(l="http:"===location.protocol?r.data.config.port.wsPort:r.data.config.port.wssPort,s.$set(s.list[n],"play",1),s.ws[n]=new y.a({requestData:{url:e,port:l,binaryType:"arraybuffer",isNeedHeatBeat:!1},canvas:a,videoType:1,onopen:function(){s.ws[n].sendRequest({url:"/preview/videoStreamStart",data:{streamIndex:2}})},onload:function(){s.ws[n].play()},onFirstRender:function(){s.$set(s.list[n],"play_londing",!1)},sessionId:o.data.config.sessionId,token:o.data.config.token})):(s.$set(s.list[n],"play",0),s.$set(s.list[n],"play_londing",!1))}catch(t){}case 11:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),playQyVideo:function(t,e){this.ws[e].play(t)},closeWs:function(){var t=Object(o.a)(i.a.mark((function t(){var e,n,s,a,o,r,l=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=l.length>0&&void 0!==l[0]?l[0]:"all",0==(n=this).camType)if("all"===e)for(s=0;s<this.list.length;s++)this.closeWs(s);else this.ws[e].close&&(this.ws[e].close(),this.ws[e].destroy(),this.ws[e]=function(){},n.$set(n.list[e],"play",0));else if(1==n.camType)if("all"===e)for(a=0;a<this.list.length;a++)this.closeWs(a);else this.ws[e]&&-1!==Object.keys(this.ws[e].__proto__).indexOf("close")&&(this.ws[e].close(),_[e]=void 0,this.ws[e+"_close"]=!0,this.ws[e].lockReconnect=!0,this.ws[e]=function(){},n.$set(n.list[e],"play",0));else if(2==n.camType)this.ws[e]&&(this.ws[e].destroy(),this.ws[e]=function(){},n.$set(n.list[e],"play",0));else if(3==n.camType)if("all"===e)for(o=0;o<this.ws.length;o++)this.closeWs(o);else this.ws[e]&&(this.ws[e].close(),this.ws[e]=function(){},n.$set(n.list[e],"play",0),n.$set(n.list[e],"play_londing",!1));else if(4==n.camType)if("all"===e)for(r=0;r<this.ws.length;r++)this.closeWs(r);else this.ws[e]&&(this.ws[e].unload(),this.ws[e].detachMediaElement(),this.ws[e].destroy(),this.ws[e]=function(){},n.$set(n.list[e],"play",0));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),openOrReshoot:function(){var t=Object(o.a)(i.a.mark((function t(e,n,s,a){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("offOrOn"!==n){t.next=2;break}return t.abrupt("return",this.openAndOffImg(e));case 2:return this.$store.commit("loadingList",+(a+e)),t.next=5,p.a.openOrReshoot("","non","".concat(n.macAddress,"&operationType=").concat(s));case 5:(o=t.sent)&&this.$Message.success(o.msg),o&&"0"===s&&this.openSetInterval(e);case 8:case"end":return t.stop()}}),t,this)})));return function(e,n,s,a){return t.apply(this,arguments)}}(),openAndOffImg:function(t){this.list[t]&&this.list[t].play?this.closeWs(t):this.openWs(t)},setImgSize:function(){var t=this;setTimeout((function(){if(t.$refs.img_max_size&&t.$refs.img_max_size.length){var e=t.$refs.img_max_size[0].offsetHeight,n=t.$refs.img_max_size[0].offsetWidth,s=e/n;s===9/16?(t.imgHeignt="100%",t.imgWidth="100%"):s>9/16?(t.imgHeignt=n*(9/16)+"px",t.imgWidth="100%"):s<9/16&&(t.imgHeignt="100%",t.imgWidth=e/(9/16)+"px")}else t.setImgSize()}),100)},beforeunloadFn:function(t){this.closeWs()}}),s),g=n("69e3"),w=(n("c6d2"),n("2877")),b={props:["userInfo"],components:{XOpenedMonitor:Object(w.a)(v,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{class:t.$style.monitor_center},[s("header",[s("div",[s("article",[s("i-button",{staticStyle:{width:"130px"},attrs:{type:"info",size:"large",icon:"ios-power"},on:{click:t.handleCloseTag}},[t._v("\n          "+t._s(t.$t("routerMenu.quit")))]),s("i-header-fullscreen",{class:t.$style.fullscreen})],1)]),s("div",{staticClass:"tag_cr",on:{click:function(e){t.drawerValue=!0}}},[s("Icon",{class:t.$style.layout,attrs:{type:"ios-apps"}}),s("span",[t._v(t._s(t.$t("routerMenu.screenStyle")))])],1)]),s("ul",{class:t.ulClass},[s("draggable",{staticStyle:{display:"contents"},attrs:{"chosen-class":"chosen","force-fallback":"true",group:"people",animation:"1000",filter:".unmover"}},[t._l(t.list,(function(e,a){return 0==t.camType?s("li",{key:e.id},[s("div",[s("section",[s("Tooltip",{staticClass:"white-space-no-wrap",attrs:{placement:"bottom",transfer:!1},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.channelName))]),s("p",[s("i",[t._v(t._s(e.ip))])])]},proxy:!0}],null,!0)},[s("h4",[t._v(t._s(e?e.channelName:""))])]),s("article",{staticClass:"unmover"},[s("i-button",{attrs:{icon:"ios-power",type:"error",size:"small",disabled:!e.play},on:{click:function(e){return e.stopPropagation(),t.openOrReshoot(a,"offOrOn")}}},[t._v(t._s(t.$t("routerMenu.close")))]),0===t.userInfo.isSensData?s("i-button",{attrs:{loading:e.uuid&&t.$store.state.loadingList[+("1"+a)],icon:"md-camera",type:"warning",size:"small",disabled:!e.play},on:{click:function(n){return n.stopPropagation(),t.openOrReshoot(a,e,"1","1")}}},[t._v("\n                "+t._s(t.$t("routerMenu.snap"))+"\n              ")]):t._e()],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e&&e.play,expression:"it&&it.play"}],style:"width: 100%; background: #98a5a5; "},[s("div",{style:"width:100%;height:100%",attrs:{id:"img__v"+a}})]),e.play||e.play_londing?t._e():s("img",{staticClass:"unmover",style:e&&e.uuid?"cursor: pointer":"cursor: not-allowed",attrs:{src:n("c4bf"),alt:""},on:{click:function(e){return e.stopPropagation(),t.openOrReshoot(a,"offOrOn")}}}),e.play_londing?s("Spin",{class:t.$style.playLonding,attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:30}})],1):t._e()],1)]):t._e()})),t._l(t.list,(function(e,a){return 1==t.camType?s("li",{key:e.id},[s("div",[s("section",[s("Tooltip",{staticClass:"white-space-no-wrap",attrs:{placement:"bottom",transfer:!1},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.channelName))]),s("p",[s("i",[t._v(t._s(e.ip))])])]},proxy:!0}],null,!0)},[s("h4",[t._v(t._s(e?e.channelName:""))])]),s("article",{staticClass:"unmover"},[s("i-button",{attrs:{icon:"ios-power",type:"error",size:"small",disabled:!e.play},on:{click:function(e){return e.stopPropagation(),t.openOrReshoot(a,"offOrOn")}}},[t._v(t._s(t.$t("routerMenu.close")))]),0===t.userInfo.isSensData?s("i-button",{attrs:{loading:e.uuid&&t.$store.state.loadingList[+("1"+a)],icon:"md-camera",type:"warning",size:"small",disabled:!e.play},on:{click:function(n){return n.stopPropagation(),t.openOrReshoot(a,e,"1","1")}}},[t._v("\n                "+t._s(t.$t("routerMenu.snap"))+"\n              ")]):t._e()],1)],1),s("p",{directives:[{name:"show",rawName:"v-show",value:e&&e.play,expression:"it && it.play"}],ref:0===a?"img_max_size":"",refInFor:!0},[s("img",{style:"width:100%;height:100%",attrs:{id:"img__"+a}})]),e.play||e.play_londing?t._e():s("img",{staticClass:"unmover",style:e&&e.uuid?"cursor: pointer":"cursor: not-allowed",attrs:{src:n("c4bf"),alt:""},on:{click:function(e){return e.stopPropagation(),t.openOrReshoot(a,"offOrOn")}}}),e.play_londing?s("Spin",{class:t.$style.playLonding,attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:30}})],1):t._e()],1)]):t._e()})),t._l(t.list,(function(e,a){return 2==t.camType?s("li",{key:e.id},[s("div",[s("section",[s("Tooltip",{staticClass:"white-space-no-wrap",attrs:{placement:"bottom",transfer:!1},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.channelName))]),s("p",[s("i",[t._v(t._s(e.ip))])])]},proxy:!0}],null,!0)},[s("h4",[t._v(t._s(e?e.channelName:""))])]),s("article",[s("i-button",{attrs:{icon:"ios-power",type:"error",size:"small",disabled:!e.play},on:{click:function(e){return t.openOrReshoot(a,"offOrOn")}}},[t._v(t._s(t.$t("routerMenu.close")))]),0===t.userInfo.isSensData?s("i-button",{attrs:{loading:e.uuid&&t.$store.state.loadingList[+("1"+a)],icon:"md-camera",type:"warning",size:"small",disabled:!e.play},on:{click:function(n){return t.openOrReshoot(a,e,"1","1")}}},[t._v("\n                "+t._s(t.$t("routerMenu.snap"))+"\n              ")]):t._e()],1)],1),s("div",{ref:0===a?"img_max_size":"",refInFor:!0,staticClass:"qyVideo"},[s("div",{style:"width: 100%; height: 100%",attrs:{id:"video__qy"+a,alt:""}})]),e.play||e.play_londing?t._e():s("img",{style:e&&e.uuid?"cursor: pointer":"cursor: not-allowed",attrs:{src:n("c4bf"),alt:""},on:{click:function(e){return t.openOrReshoot(a,"offOrOn")}}}),e.play_londing?s("Spin",{class:t.$style.playLonding,attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:30}})],1):t._e()],1)]):t._e()})),t._l(t.list,(function(e,a){return 3==t.camType?s("li",{key:e.id},[s("div",[s("section",[s("Tooltip",{staticClass:"white-space-no-wrap",attrs:{placement:"bottom",transfer:!1},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.channelName))]),s("p",[s("i",[t._v(t._s(e.ip))])])]},proxy:!0}],null,!0)},[s("h4",[t._v(t._s(e?e.channelName:""))])]),s("article",{staticClass:"unmover"},[s("i-button",{attrs:{icon:"ios-power",type:"error",size:"small",disabled:!e.play},on:{click:function(e){return e.stopPropagation(),t.openOrReshoot(a,"offOrOn")}}},[t._v(t._s(t.$t("routerMenu.close")))]),0===t.userInfo.isSensData?s("i-button",{attrs:{loading:e.uuid&&t.$store.state.loadingList[+("1"+a)],icon:"md-camera",type:"warning",size:"small",disabled:!e.play},on:{click:function(n){return n.stopPropagation(),t.openOrReshoot(a,e,"1","1")}}},[t._v("\n                "+t._s(t.$t("routerMenu.snap"))+"\n              ")]):t._e()],1)],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e&&e.play,expression:"it&&it.play"}],ref:0===a?"img_max_size":"",refInFor:!0,staticClass:"liveBoxClass",attrs:{id:"container"}},[s("canvas",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"canvas__tw"+a}})]),e.play||e.play_londing?t._e():s("img",{staticClass:"unmover",style:e&&e.uuid?"cursor: pointer":"cursor: not-allowed",attrs:{src:n("c4bf"),alt:""},on:{click:function(e){return e.stopPropagation(),t.openOrReshoot(a,"offOrOn")}}}),e.play_londing?s("Spin",{class:t.$style.playLonding,attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:30}})],1):t._e()],1)]):t._e()})),t._l(t.list,(function(e,a){return 4==t.camType?s("li",{key:e.id},[s("div",[s("section",[s("Tooltip",{staticClass:"white-space-no-wrap",attrs:{placement:"bottom",transfer:!1},scopedSlots:t._u([{key:"content",fn:function(){return[s("p",{staticStyle:{"white-space":"normal"}},[t._v(t._s(e.channelName))]),s("p",[s("i",[t._v(t._s(e.ip))])])]},proxy:!0}],null,!0)},[s("h4",[t._v(t._s(e?e.channelName:""))])]),s("article",[s("i-button",{attrs:{icon:"ios-power",type:"error",size:"small",disabled:!e.play},on:{click:function(e){return t.openOrReshoot(a,"offOrOn")}}},[t._v(t._s(t.$t("routerMenu.close")))]),0===t.userInfo.isSensData?s("i-button",{attrs:{loading:e.uuid&&t.$store.state.loadingList[+("1"+a)],icon:"md-camera",type:"warning",size:"small",disabled:!e.play},on:{click:function(n){return t.openOrReshoot(a,e,"1","1")}}},[t._v("\n                "+t._s(t.$t("routerMenu.snap"))+"\n              ")]):t._e()],1)],1),s("div",{ref:0===a?"img_max_size":"",refInFor:!0,staticClass:"qyVideo"},[s("div",{style:"width: 100%; height: 100%;display:flex;",attrs:{id:"video__"+a,alt:""}},[s("video",{directives:[{name:"show",rawName:"v-show",value:e&&e.play,expression:"it && it.play"}],staticClass:"sjVideo",staticStyle:{width:"100%","object-fit":"fill"},attrs:{id:"sjliveVideo_"+a,muted:""},domProps:{muted:!0}})])]),e.play||e.play_londing?t._e():s("img",{style:e&&e.uuid?"cursor: pointer":"cursor: not-allowed",attrs:{src:n("c4bf"),alt:""},on:{click:function(e){return t.openOrReshoot(a,"offOrOn")}}}),e.play_londing?s("Spin",{class:t.$style.playLonding,attrs:{fix:""}},[s("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:30}})],1):t._e()],1)]):t._e()}))],2)],1),s("Drawer",{class:t.$style.draver,attrs:{closable:!1,draggable:!0,placement:"right"},model:{value:t.drawerValue,callback:function(e){t.drawerValue=e},expression:"drawerValue"}},[s("div",{class:t.$style.layout,attrs:{slot:"header"},slot:"header"},[s("Icon",{class:t.$style.layout,attrs:{type:"ios-apps"}}),t._v("\n      "+t._s(t.$t("routerMenu.screenStyle"))+"\n    ")],1),s("ul",t._l([4,8,9,12,16],(function(e){return s("li",{key:e,class:t.type===e?t.$style.li:"",on:{click:function(n){t.type=e,t.drawerValue=!1}}},[s("article",t._l(e,(function(t){return s("span")})),0),s("p",[t._v("\n          "+t._s((4===e?"2 * 2":8===e&&"4 * 2")||9===e&&"3 * 3"||12===e&&"4 * 3"||16===e&&"4 * 4")+"\n        ")])])})),0)])],1)}),[],!1,(function(t){this.$style=g.default.locals||g.default}),null,null).exports},data:function(){return{show:!1,searchForm:{channelName:"",pageSize:1e3,searchType:0,pageNum:1},data:[],total:0,parkModel:""}},computed:{channelTypeList:function(){var t=[{dataCode:"CHANNEL_TYPE",dataName:$t("routerMenu.channelType1"),dataValue:1},{dataCode:"CHANNEL_TYPE",dataName:$t("routerMenu.channelType2"),dataValue:2},{dataCode:"CHANNEL_TYPE",dataName:$t("routerMenu.channelType3"),dataValue:3},{dataCode:"CHANNEL_TYPE",dataName:$t("routerMenu.channelType4"),dataValue:4},{dataCode:"CHANNEL_TYPE",dataName:$t("routerMenu.channelType5"),dataValue:5},{dataCode:"CHANNEL_TYPE",dataName:$t("routerMenu.channelType6"),dataValue:6}];return t},columns:function(){var t=this,e=[{title:$t("routerMenu.orderNumbNer"),type:"index",minWidth:80,align:"center"},{title:$t("routerMenu.channelName"),key:"channelName",minWidth:120,align:"center"},{title:$t("routerMenu.channelType"),key:"channelTypeId",minWidth:120,align:"center",render:function(e,n){var s=t.channelTypeList.find((function(t){return t.dataValue===n.row.channelTypeId}));return e("span",s?s.dataName:"")}},{title:$t("routerMenu.mac"),key:"macAddress",minWidth:200,align:"center"},{title:$t("routerMenu.mainCameraIp"),key:"camera",minWidth:120,align:"center"},{title:$t("routerMenu.minorCameraIp"),key:"camera2",minWidth:120,align:"center"}];return e}},mounted:function(){this.init()},methods:{init:function(){this.show=!1,this.getChannelList()},getChannelList:function(){var t=Object(o.a)(i.a.mark((function t(){var e;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.channelFind(this.searchForm);case 2:(e=t.sent)&&(this.data=e.data.list.filter((function(t){return t.channelTypeId})),this.total=e.data.total);case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}},$=Object(w.a)(b,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"i-table-no-border selection"},[n("div",{staticClass:"pageHeader"},[n("h4",[t._v(t._s(t.$t("routerMenu.monitorCenter")))]),n("div",{staticClass:"buttons"})]),n("Card",{staticClass:"ivu-mt",staticStyle:{height:"300px"},attrs:{bordered:!1,"dis-hover":""}},[n("Table",{ref:"table",attrs:{loading:t.$store.state.loading,height:t.data.length>=11?520:"",columns:t.columns,data:t.data,sortable:"custom"}}),n("Button",{staticClass:"ivu-mt",attrs:{type:"info",size:"large"},on:{click:function(e){t.show=!0}}},[t._v(t._s(t.$t("routerMenu.openMonitoringCenter")))])],1),t.show?n("x-opened-monitor",{attrs:{userInfo:t.userInfo},on:{off:function(e){t.show=!1}}}):t._e()],1)}),[],!1,null,"0522695a",null);e.default=$.exports},"69e3":function(t,e,n){"use strict";var s=n("f439"),a=n.n(s);e.default=a.a},c6d2:function(t,e,n){"use strict";var s=n("c790");n.n(s).a},c790:function(t,e,n){},f439:function(t,e,n){t.exports={monitor_center:"openMonitor_monitor_center_2ys40",layout:"openMonitor_layout_O1rEM",fullscreen:"openMonitor_fullscreen_2Z2bn",playLonding:"openMonitor_playLonding_12RwU",ul4:"openMonitor_ul4_1l-yu",ul8:"openMonitor_ul8_1wQyN",ul9:"openMonitor_ul9_yj36C",ul12:"openMonitor_ul12_2G7r1",ul16:"openMonitor_ul16_Fm8o8",draver:"openMonitor_draver_2uo77",li:"openMonitor_li_ojePP"}}}]);