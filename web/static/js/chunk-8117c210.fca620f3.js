(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8117c210"],{"12c7":function(e,t,r){"use strict";r.r(t),r("ac6a");var n=r("967e"),a=r.n(n),o=(r("c5f6"),r("96cf"),r("3b8d")),i=r("5a0c"),u=r.n(i),s=r("7cb1"),c=r("19de"),l=r.n(c),m=r("365c"),d=(r("7b0a"),{name:"shift_record_years",props:["userInfo"],data:function(){return{timeType:"month",dataSummary:{cash:0,wetChat:0,alipay:0,otherAmount:0,receivableAmount:0,discountAmount:0,freeAmount:0},searchForm:{carNum:"",startTime:"",endTime:"",recordType:0,selDateType:2},dateMonth:u()().format("YYYY-MM"),dateYear:u()().format("YYYY"),data:[],total:0}},computed:{columns:function(){var e=this,t=[{title:$t("routerMenu.operatingPersonnel"),key:"userName",align:"center",minWidth:120,renderHeader:function(t,r){var n=r.column,a=r.index;if(e.$refs.table)return t("span",e.$refs.table.$scopedSlots.userName({column:n,index:a}))}},{title:$t("routerMenu.abnormalOpening"),key:"errorOpenCount",align:"center",minWidth:200,render:function(e,t){return e("span",t.row.errorOpenCount+$t("routerMenu.order"))}},{title:$t("routerMenu.receivable"),key:"account",align:"center",minWidth:150,sortable:!0,render:function(t,r){return t("div",e.$utils_fmoney(r.row.account/100)+$t("routerMenu.currency"))}},{title:$t("routerMenu.officialReceipts"),key:"free",align:"center",sortable:!0,minWidth:120,render:function(t,r){return t("div",e.$utils_fmoney(r.row.free/100)+$t("routerMenu.currency"))}},{title:$t("routerMenu.reliefAmount"),key:"freeCharge",align:"center",sortable:!0,minWidth:120,render:function(t,r){return t("div",e.$utils_fmoney(r.row.freeCharge/100)+$t("routerMenu.currency"))}}];return t}},methods:{init:function(){this.getChargeData()},trimFormData:function(){return"year"===this.timeType?(this.searchForm.startTime=u()(this.dateYear).startOf("year").format("YYYY-MM-DD HH:mm:ss"),this.searchForm.endTime=u()(this.dateYear).endOf("year").format("YYYY-MM-DD HH:mm:ss")):(this.searchForm.startTime=u()(this.dateMonth).startOf("month").format("YYYY-MM-DD HH:mm:ss"),this.searchForm.endTime=u()(this.dateMonth).endOf("month").format("YYYY-MM-DD HH:mm:ss")),JSON.parse(JSON.stringify(this.searchForm))},getChargeData:function(){var e=Object(o.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.getMonthShiftRecord(this.trimFormData());case 2:(t=e.sent)&&(this.data=t.data.list.map((function(e){return e.errorOpenCount=Number(e.computerGate)+Number(e.handGate),e.free=(Number(e.account)||0)-(Number(e.freeCharge)||0)-(Number(e.disCharge)||0),e})),this.total=t.data.total);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.searchForm.pageNum=e,this.init()},changePageSize:function(e){this.searchForm.pageNum=1,this.searchForm.pageSize=e,this.init()},handleSearch:function(){var e=this;this.$refs.searchForm.validate((function(t){t&&(e.searchForm.pageNum=1,e.init())}))},validatorEndTime:function(e,t,r){this.dateTimes.length>=2?""==this.dateTimes[0]||""==this.dateTimes[1]?r(new Error($t("routerMenu.pleaseChooseTheTime"))):r():r(new Error($t("routerMenu.administratorException")))},handleSummary:function(e){var t=this,r=e.columns,n=e.data,a={};return r.forEach((function(e,r){var o=e.key;if(0!==r){var i=n.map((function(e){return Number(e[o])}));if("freeCharge"===e.key||"free"===e.key||"account"===e.key){var u=i.reduce((function(e,t){var r=Number(t);return isNaN(r)?e:e+t}),0);a[o]={key:o,value:t.$utils_fmoney(u/100)+$t("routerMenu.currency")}}else if("errorOpenCount"===e.key){var s=i.reduce((function(e,t){var r=Number(t);return isNaN(r)?e:e+t}),0);a[o]={key:o,value:s+$t("routerMenu.order")}}else a[o]={key:o,value:""}}else a[o]={key:o,value:$t("routerMenu.total")}})),a},excelToJsonSort:function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,n,o,i=this;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=105,(r=this.columns.filter((function(e){return e.key})).map((function(e){return{value:e.key,name:e.title,width:t,height:25}}))).unshift({value:"index",name:$t("routerMenu.orderNumbNer"),width:t,height:25}),delete(n=JSON.parse(JSON.stringify(this.trimFormData()))).pageNum,delete n.pageSize,this.$store.commit("loadingList",1),e.next=9,m.a.getAllMonthShiftRecord(n,"non");case 9:if(!(o=e.sent)){e.next=14;break}return this.$Message.success($t("routerMenu.downloadingExcelFile")),o.dataList.length||(o.dataList=[]),e.abrupt("return",{headers:r,jsonArr:o.dataList.map((function(e){var t=JSON.parse(JSON.stringify(e));for(var r in e){t.errorOpenCount=Number(e.computerGate)+Number(e.handGate)||0,t.account=i.$utils_fmoney(e.account/100);var n=(Number(e.account)||0)-(Number(e.freeCharge)||0)-(Number(e.disCharge)||0);t.free=i.$utils_fmoney(n/100),t.freeCharge=i.$utils_fmoney(e.freeCharge/100)}return t}))});case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),exportExcelAll:function(){var e=Object(o.a)(a.a.mark((function e(){var t,r,n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="year"===this.timeType?$t("routerMenu.excel1"):$t("routerMenu.excel2"),e.next=3,this.excelToJsonSort();case 3:if(!(r=e.sent)){e.next=12;break}return n=r.headers,o=r.jsonArr,e.next=10,Object(s.a)(t,n,o);case 10:i=e.sent,l()(i,t+".xls");case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.init()}}),h=r("7eef"),f=r("2877"),p=Object(f.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"i-table-no-border selection"},[r("div",{staticClass:"pageHeader"},[r("h4",[e._v(e._s(e.$t("routerMenu.summaryDetails")))]),r("div",{staticClass:"buttons"},[0===e.userInfo.isSensData?r("Button",{attrs:{type:"info",icon:"ios-list",loading:e.$store.state.loading||e.$store.state.loadingList[1]},on:{click:e.exportExcelAll}},[e._v(e._s(e.$t("routerMenu.export")))]):e._e()],1)]),r("Card",{staticClass:"ivu-mt",attrs:{bordered:!1,"dis-hover":""}},[r("Form",{ref:"searchForm",staticClass:"search-form",attrs:{model:e.searchForm,inline:"","label-width":80}},[r("FormItem",{attrs:{prop:"time","label-width":0,label:""}},[r("RadioGroup",{class:e.$style.redioButton,attrs:{type:"button"},on:{"on-change":e.handleSearch},model:{value:e.timeType,callback:function(t){e.timeType=t},expression:"timeType"}},[r("Radio",{attrs:{label:"year",border:""}},[e._v(e._s(e.$t("routerMenu.yearSummary")))]),r("Radio",{attrs:{label:"month",border:""}},[e._v(e._s(e.$t("routerMenu.monthlySummar")))])],1)],1),r("FormItem",{attrs:{prop:"time","label-width":0,label:""}},[r("Select",{staticStyle:{width:"90px","background-color":"#5c6b77"},model:{value:e.searchForm.selDateType,callback:function(t){e.$set(e.searchForm,"selDateType",t)},expression:"searchForm.selDateType"}},[r("Option",{attrs:{value:2}},[e._v(e._s(e.$t("routerMenu.offWork")))])],1)],1),r("FormItem",{attrs:{prop:"time","label-width":8,label:""}},["year"===e.timeType?r("DatePicker",{staticClass:"date-timerange",attrs:{type:"year",format:"yyyy",placeholder:this.$t("routerMenu.pleaseSelectDate"),clearable:!1},model:{value:e.dateYear,callback:function(t){e.dateYear=t},expression:"dateYear"}}):r("DatePicker",{staticClass:"date-timerange",attrs:{type:"month",format:"yyyy-MM",placeholder:this.$t("routerMenu.pleaseSelectDate"),clearable:!1},model:{value:e.dateMonth,callback:function(t){e.dateMonth=t},expression:"dateMonth"}})],1),r("Form-item",{attrs:{"label-width":1}},[r("Button",{attrs:{type:"primary",icon:"md-search",loading:e.$store.state.loading},on:{click:e.handleSearch}},[e._v(e._s(e.$t("routerMenu.search")))]),r("Button",{staticClass:"ivu-ml-8",attrs:{icon:"md-refresh",loading:e.$store.state.loading},on:{click:function(t){return e.$emit("handleReload")}}},[e._v(e._s(e.$t("routerMenu.resetting")))])],1)],1),r("Table",{ref:"table",attrs:{loading:e.$store.state.loading,height:e.data.length>=11?520:"",columns:e.columns,data:e.data,sortable:"custom","show-summary":"","summary-method":e.handleSummary},scopedSlots:e._u([{key:"userName",fn:function(t){var n=t.column,a=t.index;return[r("filter-search",{attrs:{column:n,index:a,searchForm:e.searchForm,searchKey:"userName"},on:{handleSearch:e.handleSearch}})]}}])}),r("div",{staticClass:"ivu-mt ivu-text-center"},[r("Page",{attrs:{current:this.searchForm.pageNum,total:e.total,"page-size":this.searchForm.pageSize,"page-size-opts":[10,20,50,100],"show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)}),[],!1,(function(e){this.$style=h.default.locals||h.default}),null,null);t.default=p.exports},"19de":function(e,t){e.exports=function(e,t,r,n){var a=new Blob(void 0!==n?[n,e]:[e],{type:r||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(a,t);else{var o=window.URL.createObjectURL(a),i=document.createElement("a");i.style.display="none",i.href=o,i.setAttribute("download",t),void 0===i.download&&i.setAttribute("target","_blank"),document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(o)}),0)}}},"7b0a":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"j",(function(){return o})),r.d(t,"m",(function(){return i})),r.d(t,"i",(function(){return u})),r.d(t,"l",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return m})),r.d(t,"f",(function(){return d})),r.d(t,"k",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return p})),r("a481"),r("c5f6");var n=function(e,t,r){""===t||null==t?r(new Error($t("routerMenu.error21"))):r()},a=function(e,t,r){!t&&0!==t||null==t?r(new Error($t("routerMenu.error23"))):r()},o=function(e,t,r){!t&&0!==t||/^[0-9]*$/.test(t)?r():r(new Error($t("routerMenu.error27")))},i=function(e,t,r){!t&&0!==t||/^\d+$/.test(t)?r():r(new Error($t("routerMenu.error28")))},u=function(e,t,r){t&&!/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(t.toUpperCase())?r(new Error($t("routerMenu.error32"))):r()},s=function(e,t,r){!t&&0!==t||void 0==t||/^((ht|f)tps?):\/\/([\w\-]+(\.[\w\-]+)*\/)*[\w\-]+(\.[\w\-]+)*\/?(\?([\w\-\.,@?^=%&:\/~\+#]*)+)?/.test(t)?r():r(new Error($t("routerMenu.error34")))},c=function(e,t,r){(t||0===t)&&/^[0-9]*$/.test(t)&&Number(t)>0?r():r(new Error($t("routerMenu.error35")))},l=function(e,t,r){""!==t&&/^\d+(\.\d+)?$/.test(t)?r():r(new Error($t("routerMenu.error36")))},m=function(e,t,r){(t||0===t)&&0!=t&&/^\d+(\.\d+)?$/.test(t)?r():r(new Error($t("routerMenu.error37")))},d=function(e){return(e||0===e)&&/^[0-9]*$/.test(e)?parseInt(e):0},h=function(e,t,r){t&&t.length<3?r(new Error($t("routerMenu.error39"))):r()},f=function(e,t,r){t&&!/^(254|252|248|240|224|192|128|0)\.0\.0\.0$|^(255\.(254|252|248|240|224|192|128|0)\.0\.0)$|^(255\.255\.(254|252|248|240|224|192|128|0)\.0)$|^(255\.255\.255\.(254|252|248|240|224|192|128|0))$/.test(t.toUpperCase())?r(new Error($t("routerMenu.error44"))):r()},p=function(e,t,r){!t&&0!==t||/(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}/.test(t.toUpperCase())?r():r(new Error($t("routerMenu.error45")))}},"7cb1":function(e,t,r){"use strict";var n=r("bd86");r("456d"),r("ac6a"),r("7f7f"),r("34ef"),t.a=function(e,t,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"xlsx";r.unshift({}),r.unshift({title:e});var o=t.map((function(e){return r[1][e.value]=e.name,e.value})),i=[];r.map((function(e,t){return o.map((function(r,n){return Object.assign({},{v:"index"===r&&t>1?t-1:e[r],s:{font:{name:"Arial",sz:10},alignment:{horizontal:"center",vertical:"center",wrapText:!0},border:1===t?{bottom:{style:"thin",color:{rgb:"42a642"}},top:{style:"thin",color:{rgb:"42a642"}}}:{}},position:(n>25?function(e){for(var t="",r=0;e>0;)r=e%26+1,t=String.fromCharCode(r+64)+t,e=(e-r)/26;return t}(n):String.fromCharCode(65+n))+(t+1)})}))})).reduce((function(e,t){return e.concat(t)})).forEach((function(e,t){return i[e.position]={v:e.v,s:e.s}}));var u=Object.keys(i);i.A1.v=r[0].title,i.A1.s={font:{name:"Arial",sz:12,italic:!1,underline:!1,bold:!0},alignment:{horizontal:"center",vertical:"center"}};var s="A".concat(r.length);r[r.length-1].total&&(i[s].v=r[r.length-1].total,i[s].s={font:{name:"Arial",sz:12,italic:!1,underline:!1,bold:!0},alignment:{horizontal:"center",vertical:"center"}}),i["!merges"]=[{s:{c:0,r:0},e:{c:t.length-1||1,r:0}}],r[r.length-1].total&&i["!merges"].push({s:{c:0,r:r.length-1},e:{c:t.length-1||1,r:r.length-1}});var c=t.map((function(e){return{wpx:e.width}})),l=t.map((function(e){return{hpx:e.height}}));t.push(t[t.length-1]),i["!cols"]=c,i["!rows"]=l;var m={SheetNames:[e],Sheets:Object(n.a)({},e,Object.assign({},i,{"!ref":u[0]+":"+u[u.length-1]}))};return new Blob([function(e){if("undefined"!=typeof ArrayBuffer){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=255&e.charCodeAt(n);return t}for(t=new Array(e.length),n=0;n!=e.length;++n)t[n]=255&e.charCodeAt(n);return t}(XLSX.write(m,{"!rows":l,bookType:a,bookSST:!1,type:"binary",cellStyles:!0}))],{type:""})}},"7eef":function(e,t,r){"use strict";var n=r("9849"),a=r.n(n);t.default=a.a},9849:function(e,t,r){e.exports={redioButton:"index_redioButton_2X1cZ"}}}]);