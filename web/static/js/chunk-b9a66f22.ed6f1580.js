(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b9a66f22"],{4524:function(t,e,r){"use strict";var o=r("d407"),n=r.n(o);e.default=n.a},"71e5":function(t,e,r){},d407:function(t,e,r){t.exports={section:"index_section_1afdT",h4img:"index_h4img_LJnhf",bgimg:"index_bgimg_1yOgB",vueCropper:"index_vueCropper_2Z9aE",div:"index_div_3ur7b",uploadLogo:"index_uploadLogo_1na8_",model:"index_model_wZfwB"}},ddfa:function(t,e,r){"use strict";r.r(e),r("8e6e"),r("ac6a"),r("456d"),r("28a5");var o=r("967e"),n=r.n(o),a=(r("96cf"),r("3b8d")),i=r("bd86"),s=r("7e79"),c=r("365c"),u=(r("1ce5"),r("2f62"));function p(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}var g={props:["userInfo"],name:"setting_logo",components:{VueCropper:s.VueCropper},data:function(){return{option:{img1:"/logo/logo-dark.png?V=".concat(10*Math.random()),img2:"/logo/logo-small.png?V=".concat(10*Math.random()),img3:"/logo/favicon.png?V=".concat(10*Math.random()),size:1,outputType:"png"},img:"",imgStyle:"",bgimg:"/logo/background.jpg?V=".concat(10*Math.random())}},computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?p(r,!0).forEach((function(e){Object(i.a)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(u.e)("admin/layout",["logoutConfirm","isMoon"])),mounted:function(){},methods:{finish:function(t){var e=this;this.$refs["cropper".concat(t)][0].getCropData((function(t){e.img=t}))},changeImage:function(){var t=Object(a.a)(n.a.mark((function t(e,r){var o,a,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.$store.state.loading){t.next=2;break}return t.abrupt("return");case 2:if(o=this,a=e.target.files&&e.target.files[0]){t.next=6;break}return t.abrupt("return");case 6:(i=new FileReader).onload=function(t){o.$set(o.option,"img".concat(r),this.result),o.removeImg("uploadLogo".concat(r))},i.readAsDataURL(a);case 9:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),pushLogoImg:function(t){var e=this,r="";1==+t&&(r="logo-navy.png"),2==+t&&(r="logo-small.png"),3==+t&&(r="favicon.png"),this.$refs["cropper".concat(t)][0].getCropBlob(function(){var t=Object(a.a)(n.a.mark((function t(o){var a,i;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.size>102400&&e.$Message.error("logo 图片不得大于100kb"),a=new File([o],r,{type:"image/png"}),t.next=4,c.c.updateLogo(a,"_upload");case 4:(i=t.sent)&&e.$Message.success(i.msg);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},changeBgImage:function(){var t=Object(a.a)(n.a.mark((function t(e,r){var o,a,i,s,u,p,g;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this,(a=e.target.files&&e.target.files[0])&&!this.$store.state._loading){t.next=5;break}return this.removeImg(r),t.abrupt("return");case 5:if("jpg"===(i=a.type.split("/")[1])||"jpeg"===i){t.next=9;break}return this.removeImg(r),t.abrupt("return",this.$Message.error("背景图只能上传 jpg 文件"));case 9:if(s=512e3,!(a.size>s)){t.next=13;break}return this.removeImg(r),t.abrupt("return",this.$Message.error("背景图不得大于 500kb"));case 13:return u=new File([a],"background.jpg",{type:"image/jpeg"}),t.next=16,c.c.updateLogo(u,"_upload");case 16:(p=t.sent)&&1==+p.status&&((g=new FileReader).onload=function(t){o.bgimg=this.result},this.removeImg(r),g.readAsDataURL(a),this.$Message.success(p.msg));case 18:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}(),removeImg:function(t){document.getElementById(t).value=""}}},l=r("4524"),f=(r("e223"),r("2877")),d=Object(f.a)(g,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"i-table-no-border selection"},[r("div",{staticClass:"pageHeader"},[r("h4",[t._v(t._s(t.$t("routerMenu.logoSettings")))])]),r("Card",{staticClass:"ivu-mt",class:t.$style.section,attrs:{bordered:!1,"dis-hover":""}},[r("Tabs",{attrs:{value:"name1"}},t._l(3,(function(e){return r("TabPane",{key:e,attrs:{label:1==e?t.$t("routerMenu.bLogo"):2==e?t.$t("routerMenu.sLogo"):t.$t("routerMenu.tLogo"),name:"name"+e}},[r("div",{class:t.$style.div},[r("vueCropper",{ref:"cropper"+e,refInFor:!0,class:t.$style.vueCropper,attrs:{img:t.option["img"+e],outputSize:t.option.size,outputType:t.option.outputType}}),r("Alert",{staticStyle:{"margin-top":"10px","max-width":"600px"},attrs:{type:"warning","show-icon":""}},[t._v(t._s(t.$t("routerMenu.error133")))]),r("div",{class:t.$style.uploadLogo,staticStyle:{"margin-top":"10px"}},[r("input",{attrs:{id:"uploadLogo"+e,type:"file",enctype:"multipart/form-data",accept:"image/png"},on:{change:function(r){return t.changeImage(r,e)}}}),r("label",{attrs:{for:"uploadLogo"+e}},[r("Icon",{attrs:{type:"md-add"}}),r("span",[t._v(t._s(t.$t("routerMenu.choosePictures")))]),t.$store.state.loading?r("Spin",{attrs:{fix:""}},[r("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"ios-loading",size:"23"}})],1):t._e()],1)]),r("Button",{attrs:{type:"info"},on:{click:function(r){t.$refs["cropper"+e][0].startCrop()}}},[t._v(t._s(t.$t("routerMenu.cutPictures")))]),r("Button",{attrs:{type:"info",icon:"md-add"},on:{click:function(r){t.$refs["cropper"+e][0].changeScale(1)}}}),r("Button",{attrs:{type:"info",icon:"md-remove"},on:{click:function(r){t.$refs["cropper"+e][0].changeScale(-1)}}}),r("Button",{attrs:{type:"info"},on:{click:function(r){t.$refs["cropper"+e][0].rotateRight()}}},[t._v(t._s(t.$t("routerMenu.clockwiseRotation")))]),r("Button",{attrs:{type:"info"},on:{click:function(r){t.$refs["cropper"+e][0].rotateLeft()}}},[t._v(t._s(t.$t("routerMenu.contrarotate")))]),r("Button",{attrs:{type:"info"},on:{click:function(r){return t.finish(e,"base64")}}},[t._v(t._s(t.$t("routerMenu.previewPictures")))]),r("Button",{attrs:{disabled:1===t.userInfo.isSensData,loading:t.$store.state._loading,icon:"md-cloud-upload",type:"info"},on:{click:function(r){return t.pushLogoImg(e)}}},[t._v("\n                        "+t._s(t.$t("routerMenu.upload"))+" "+t._s(1==e?t.$t("routerMenu.menuBar"):t.$t("routerMenu.topForm"))+"logo")])],1)])})),1),t.img?r("div",{class:t.$style.model,staticStyle:{"z-index":"1019"},on:{click:function(e){t.img=""}}},[r("div",{style:t.imgStyle},[r("img",{ref:"modelImg",attrs:{src:t.img,alt:""}})])]):t._e()],1)],1)}),[],!1,(function(t){this.$style=l.default.locals||l.default}),null,null);e.default=d.exports},e223:function(t,e,r){"use strict";var o=r("71e5");r.n(o).a}}]);