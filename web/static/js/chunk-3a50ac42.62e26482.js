(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3a50ac42"],{"0efa":function(e,t,n){"use strict";var o=n("d21a");n.n(o).a},"4bfa":function(e,t,n){"use strict";var o=n("b3c9");n.n(o).a},"504c":function(e,t,n){var o=n("9e1e"),i=n("0d58"),s=n("6821"),a=n("52a7").f;e.exports=function(e){return function(t){for(var n,r=s(t),l=i(r),c=l.length,d=0,u=[];c>d;)n=l[d++],o&&!a.call(r,n)||u.push(e?[n,r[n]]:r[n]);return u}}},6944:function(e,t,n){"use strict";var o=n("a607"),i=n.n(o);t.default=i.a},"72c2":function(e,t,n){"use strict";var o=n("8114"),i=n.n(o);t.default=i.a},"72f9":function(e,t,n){},"7bf5":function(e,t,n){"use strict";var o=n("7ff1");n.n(o).a},"7ff1":function(e,t,n){},8114:function(e,t,n){e.exports={selection:"ageRatio_selection_8tFRP",dom1:"ageRatio_dom1_2zbdV",ageRatio_selection_8tFRP:"ageRatio_ageRatio_selection_8tFRP_2-YjP"}},8610:function(e,t,n){},8615:function(e,t,n){var o=n("5ca1"),i=n("504c")(!1);o(o.S,"Object",{values:function(e){return i(e)}})},"91b9":function(e,t,n){"use strict";var o=n("b8cd"),i=n.n(o);t.default=i.a},a607:function(e,t,n){e.exports={container:"devs_container_3wEzL",table:"devs_table_1nOGS",statusWrapper:"devs_statusWrapper_e3LKA",statusDot:"devs_statusDot_1SeAR",pulse:"devs_pulse_1R551",online:"devs_online_vQYPc",offline:"devs_offline_16Gxr",statusText:"devs_statusText_2crcn",actionWrapper:"devs_actionWrapper_2dsEP",actionButton:"devs_actionButton_1-4Yt",global:"devs_global_3iHXf","ivu-btn":"devs_ivu-btn_37MPa","ivu-btn-loading":"devs_ivu-btn-loading_3rLiF","ivu-icon":"devs_ivu-icon_3zyhx"}},acb5:function(e,t,n){"use strict";var o=n("8610");n.n(o).a},b3c9:function(e,t,n){},b8cd:function(e,t,n){e.exports={monitor_center:"openMonitor_monitor_center_3zRw8",header:"openMonitor_header_13blk",datetime:"openMonitor_datetime_14ext",title_section:"openMonitor_title_section_3pzd4",title_icon:"openMonitor_title_icon_2-mL0",title_decoration:"openMonitor_title_decoration_1OPF4",controls:"openMonitor_controls_1P_Mj",fullscreen_btn:"openMonitor_fullscreen_btn_1qvgS",exit_btn:"openMonitor_exit_btn_3CTLb",main_content:"openMonitor_main_content_1ggzB",content_row:"openMonitor_content_row_UuPra",panel:"openMonitor_panel_mf8Tu",panel_corners:"openMonitor_panel_corners_1ziIF",corner:"openMonitor_corner_2XUja",panel_header:"openMonitor_panel_header_3fKko",header_line:"openMonitor_header_line_r7dnb",panel_content:"openMonitor_panel_content_PBWr5",panel_footer:"openMonitor_panel_footer_1W3r6",left_panel:"openMonitor_left_panel_1BNJd",image_grid:"openMonitor_image_grid_2M_-d",grid_container:"openMonitor_grid_container_oQEb2",image_card:"openMonitor_image_card_Oi4B8",fadeInUp:"openMonitor_fadeInUp_3BfTu",image_wrapper:"openMonitor_image_wrapper_27IX1",image_overlay:"openMonitor_image_overlay_2peF1",card_info:"openMonitor_card_info_VbHJA",time:"openMonitor_time_1owN2",location:"openMonitor_location_1wckA",center_panel:"openMonitor_center_panel_CQ8oQ",main_display:"openMonitor_main_display_b5AdO",person_details:"openMonitor_person_details_1wfKQ",person_image:"openMonitor_person_image_1MjWp",confidence_badge:"openMonitor_confidence_badge_12CPF",person_info:"openMonitor_person_info_2wYxq",person_name:"openMonitor_person_name_3aIzl",info_grid:"openMonitor_info_grid_3-HMi",info_item:"openMonitor_info_item_rOabB",status_badge:"openMonitor_status_badge_1irMq",status_1:"openMonitor_status_1_kbKdk",status_2:"openMonitor_status_2_-iPXN",status_3:"openMonitor_status_3_mcaz8",status_icon:"openMonitor_status_icon_1_FDu",no_person_selected:"openMonitor_no_person_selected_28uD-",right_panel:"openMonitor_right_panel_1mLNt",verified_list:"openMonitor_verified_list_3AXqh",list_container:"openMonitor_list_container_28_pk",verified_item:"openMonitor_verified_item_BmQyt",slideInRight:"openMonitor_slideInRight_bAbm3",selected:"openMonitor_selected_3pDeW",verified_image:"openMonitor_verified_image_3v0YZ",status_indicator:"openMonitor_status_indicator_1k0Pc",verified_info:"openMonitor_verified_info_1gut4",info_row:"openMonitor_info_row_uXSGz",empty_state:"openMonitor_empty_state_3OoxE",chart_container:"openMonitor_chart_container_UfPDe",gender_chart:"openMonitor_gender_chart_3nCvK",age_chart:"openMonitor_age_chart_2b5gy",devices_component:"openMonitor_devices_component_2Qygw","fade-enter-active":"openMonitor_fade-enter-active_2yAgL","fade-leave-active":"openMonitor_fade-leave-active_2yvM8","fade-enter-from":"openMonitor_fade-enter-from_2UM8d","fade-leave-to":"openMonitor_fade-leave-to_JSRxZ","list-enter-active":"openMonitor_list-enter-active_2ahXU","list-leave-active":"openMonitor_list-leave-active_1KMZl","list-enter-from":"openMonitor_list-enter-from_29CQD","list-leave-to":"openMonitor_list-leave-to_3uAIq","person-info-enter-active":"openMonitor_person-info-enter-active_2pCQ3","person-info-leave-active":"openMonitor_person-info-leave-active_2ACoM","person-info-enter-from":"openMonitor_person-info-enter-from_15hA8","person-info-leave-to":"openMonitor_person-info-leave-to_3T-3Y","text-primary":"openMonitor_text-primary_3phYD","text-secondary":"openMonitor_text-secondary_16IFy"}},bf0b0:function(e,t,n){"use strict";var o=n("72f9");n.n(o).a},cc36:function(e,t,n){"use strict";var o=n("d5fa"),i=n.n(o);t.default=i.a},d21a:function(e,t,n){},d5fa:function(e,t,n){e.exports={selection:"menWomen_selection_3WAKD",number:"menWomen_number_2GsD_",dom1:"menWomen_dom1_1bb_i"}},df5c:function(e,t,n){"use strict";n.r(t),n("8e6e"),n("ac6a"),n("456d");var o=n("bd86"),i=(n("28a5"),n("7514"),n("967e")),s=n.n(i),a=(n("96cf"),n("3b8d")),r=n("0a91"),l=n("26a1"),c=n("94d4"),d=n("365c"),u=n("75fc"),_=(n("8615"),n("313e")),p=n.n(_),f={props:["dataInfo"],watch:{dataInfo:function(e){var t=this.addLiquidFill(this.colors,this.dataInfo);this.dom=p.a.init(this.$refs.dom1),this.dom.setOption(t)}},name:"serviceRequests",data:function(){return{dom:null,title:$t("routerMenu.ageGroupProportion")}},mounted:function(){var e=this.addLiquidFill(this.colors,this.dataInfo);this.dom=p.a.init(this.$refs.dom1),this.dom.setOption(e)},methods:{resize:function(){this.dom.resize()},addLiquidFill:function(e,t){var n=Object.values(t),o=50;return n.some((function(e){return e>0}))&&(o=50*Math.ceil(Math.max.apply(Math,Object(u.a)(n))/50)),{backgroundColor:"rgba(14,92,156, 0.5)",grid:{top:"25%",bottom:"10%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow",label:{show:!0}}},legend:{data:[$t("routerMenu.ageGroupProportion")],top:"15%",textStyle:{color:"#ffffff"}},xAxis:{data:["0-19"+$t("routerMenu.years"),"20-29"+$t("routerMenu.years"),"30-39"+$t("routerMenu.years"),"40-49"+$t("routerMenu.years"),"50-59"+$t("routerMenu.years"),"60-69"+$t("routerMenu.years"),"70-79"+$t("routerMenu.years")],axisLine:{show:!0,lineStyle:{color:"#01FCE3"}},axisTick:{show:!0},axisLabel:{show:!0,textStyle:{color:"#ebf8ac"}}},yAxis:[{type:"value",min:0,max:o,nameTextStyle:{color:"#ebf8ac"},splitLine:{show:!1},axisTick:{show:!0},axisLine:{show:!0,lineStyle:{color:"#FFFFFF"}},axisLabel:{show:!0,formatter:"{value}",textStyle:{color:"#ebf8ac"}}},{type:"value",min:0,max:o,nameTextStyle:{color:"#ebf8ac"},position:"right",splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!0,formatter:"{value}",textStyle:{color:"#ebf8ac"}}},{type:"value",gridIndex:0,min:0,max:o,splitNumber:8,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.0)","rgba(250,250,250,0.05)"]}}}],series:[{name:$t("routerMenu.people"),type:"line",yAxisIndex:1,smooth:!0,showAllSymbol:!0,symbol:"circle",symbolSize:10,itemStyle:{color:"#058cff"},lineStyle:{color:"#058cff"},areaStyle:{color:"rgba(5,140,255, 0.2)"},data:n},{type:"bar",barWidth:15,itemStyle:{normal:{color:new p.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#00FFE3"},{offset:1,color:"#4693EC"}])}},data:n}]}}}},m=(n("7bf5"),n("72c2")),v=n("2877"),h=Object(v.a)(f,(function(){var e=this.$createElement,t=this._self._c||e;return t("ul",{class:this.$style.selection},[t("li",{staticStyle:{display:"flex"}},[t("h4",[this._v(this._s(this.title))]),t("div",{ref:"dom1",class:this.$style.dom1})])])}),[],!1,(function(e){this.$style=m.default.locals||m.default}),null,null).exports,y=(n("c5f6"),{name:"FaceMonitorTable",props:{devsInfo:{type:Array,default:function(){return[]}},deviceIdsOnlieState:{type:Object,default:function(){return{}}},innerHeight:Number||String},data:function(){var e=this;return{columns1:[{title:this.$t("routerMenu.deviceName"),key:"localName",align:"center",minWidth:140,ellipsis:!0,tooltip:!0},{title:this.$t("routerMenu.deviceSerialNumber"),key:"deviceId",align:"center",minWidth:140,ellipsis:!0,tooltip:!0},{title:this.$t("routerMenu.status"),align:"center",minWidth:100,render:function(t,n){var o=+(e.deviceIdsOnlieState[n.row.deviceId]||0)>0;return t("Tooltip",{props:{content:o?e.$t("routerMenu.on"):e.$t("routerMenu.off"),transfer:!0}},[t("span",{class:[e.$style.statusDot,o?e.$style.online:e.$style.offline]})])}},{title:this.$t("routerMenu.operate"),align:"center",minWidth:100,render:function(t,n){var o=e.deviceIdsOnlieState[n.row.deviceId]||0,i=2==e.deviceType||+o<1,s=e.$store.state.loadingList[10+n.index];return t("div",[t("Tooltip",{props:{content:e.$t("routerMenu.remoteUnlocking"),transfer:!0}},[t("Button",{props:{type:"primary",size:"small",icon:"md-exit",loading:s,disabled:i},class:e.$style.actionButton,on:{click:function(){e.remotelyOpenDoor(n.row,n.index+10)}}},e.$t("routerMenu.remoteUnlocking"))])])}}],deviceType:""}},methods:{remotelyOpenDoor:function(){var e=Object(a.a)(s.a.mark((function e(t,n){var i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.$store.commit("loadingList",n),e.next=4,d.c.montiorCenterRemotelyOpenDoor("","non",t.deviceId);case 4:(i=e.sent)&&this.$Message.success(i.msg||this.$t("routerMenu.operationSucces")),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),this.$Message.error("操作失败，请重试");case 12:return e.prev=12,this.$store.commit("loadingList",Object(o.a)({},n,!1)),e.finish(12);case 15:case"end":return e.stop()}}),e,this,[[0,8,12,15]])})));return function(t,n){return e.apply(this,arguments)}}(),getParametersFindByCode:function(){var e=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.c.parametersFindByCode("","","DEVICE_TYPE");case 3:(t=e.sent)&&(this.deviceType=t.data.value),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},mounted:function(){this.getParametersFindByCode()}}),g=n("6944");n("acb5");var b=Object(v.a)(y,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"face-monitor-table",class:e.$style.container},[n("Table",{class:e.$style.table,attrs:{height:e.innerHeight>1e3?320:e.innerHeight>900?300:e.innerHeight>800?265:e.innerHeight>750?230:180,columns:e.columns1,data:e.devsInfo,stripe:!1}})],1)}),[],!1,(function(e){this.$style=g.default.locals||g.default}),"5eb594a6",null).exports,$=["path://M18.2629891,11.7131596 L6.8091608,11.7131596 C1.6685112,11.7131596 0,13.032145 0,18.6237673 L0,34.9928467 C0,38.1719847 4.28388932,38.1719847 4.28388932,34.9928467 L4.65591984,20.0216948 L5.74941883,20.0216948 L5.74941883,61.000787 C5.74941883,65.2508314 11.5891201,65.1268798 11.5891201,61.000787 L11.9611506,37.2137775 L13.1110872,37.2137775 L13.4831177,61.000787 C13.4831177,65.1268798 19.3114787,65.2508314 19.3114787,61.000787 L19.3114787,20.0216948 L20.4162301,20.0216948 L20.7882606,34.9928467 C20.7882606,38.1719847 25.0721499,38.1719847 25.0721499,34.9928467 L25.0721499,18.6237673 C25.0721499,13.032145 23.4038145,11.7131596 18.2629891,11.7131596 M12.5361629,1.11022302e-13 C15.4784742,1.11022302e-13 17.8684539,2.38997966 17.8684539,5.33237894 C17.8684539,8.27469031 15.4784742,10.66467 12.5361629,10.66467 C9.59376358,10.66467 7.20378392,8.27469031 7.20378392,5.33237894 C7.20378392,2.38997966 9.59376358,1.11022302e-13 12.5361629,1.11022302e-13","path://M28.9624207,31.5315864 L24.4142575,16.4793596 C23.5227152,13.8063773 20.8817445,11.7111088 17.0107398,11.7111088 L12.112691,11.7111088 C8.24168636,11.7111088 5.60080331,13.8064652 4.70917331,16.4793596 L0.149791395,31.5315864 C-0.786976655,34.7595013 2.9373074,35.9147532 3.9192135,32.890727 L8.72689855,19.1296485 L9.2799493,19.1296485 C9.2799493,19.1296485 2.95992025,43.7750224 2.70031069,44.6924335 C2.56498417,45.1567684 2.74553639,45.4852068 3.24205501,45.4852068 L8.704461,45.4852068 L8.704461,61.6700801 C8.704461,64.9659872 13.625035,64.9659872 13.625035,61.6700801 L13.625035,45.360657 L15.5097899,45.360657 L15.4984835,61.6700801 C15.4984835,64.9659872 20.4191451,64.9659872 20.4191451,61.6700801 L20.4191451,45.4852068 L25.8814635,45.4852068 C26.3667633,45.4852068 26.5586219,45.1567684 26.4345142,44.6924335 C26.1636859,43.7750224 19.8436568,19.1296485 19.8436568,19.1296485 L20.3966199,19.1296485 L25.2043926,32.890727 C26.1862111,35.9147532 29.9105828,34.7595013 28.9625083,31.5315864 L28.9624207,31.5315864 Z M14.5617154,0 C17.4960397,0 19.8773132,2.3898427 19.8773132,5.33453001 C19.8773132,8.27930527 17.4960397,10.66906 14.5617154,10.66906 C11.6274788,10.66906 9.24611767,8.27930527 9.24611767,5.33453001 C9.24611767,2.3898427 11.6274788,0 14.5617154,0 L14.5617154,0 Z","path://M512 292.205897c80.855572 0 146.358821-65.503248 146.358821-146.358821C658.358821 65.503248 592.855572 0 512 0 431.144428 0 365.641179 65.503248 365.641179 146.358821 365.641179 227.214393 431.144428 292.205897 512 292.205897zM512 731.282359c-80.855572 0-146.358821 65.503248-146.358821 146.358821 0 80.855572 65.503248 146.358821 146.358821 146.358821 80.855572 0 146.358821-65.503248 146.358821-146.358821C658.358821 796.273863 592.855572 731.282359 512 731.282359z"],M={props:["dataInfo"],watch:{dataInfo:function(e){var t=this.addLiquidFill(this.colors,this.dataInfo);this.dom=p.a.init(this.$refs.dom1),this.dom.setOption(t)}},name:"serviceRequests",data:function(){return{bodyMax:200,dom:null,title:$t("routerMenu.genderRatio")}},mounted:function(){var e=this.addLiquidFill(this.colors,this.dataInfo);this.dom=p.a.init(this.$refs.dom1),this.dom.setOption(e)},methods:{resize:function(){this.dom.resize()},addLiquidFill:function(e,t){var n=+t[0]+ +t[1];return{tooltip:{show:!1},grid:{left:"20%",right:"20%",top:"20%",bottom:"20%",containLabel:!0},xAxis:{data:["a","x","b"],axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},yAxis:{max:n,splitLine:{show:!1},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},series:[{name:"typeA",type:"pictorialBar",symbolClip:!0,symbolBoundingData:n,label:{normal:{show:!0,position:"bottom",offset:[0,10],formatter:function(e){var t=(e.value/n*100).toFixed(0);return t>=0?t+"%":"0%"},textStyle:{fontSize:18,fontFamily:"Arial",color:"#686868"}}},data:[{value:t[0],symbol:$[0],itemStyle:{normal:{color:"rgba(105,204,230)"}}},{},{value:t[1],symbol:$[1],itemStyle:{normal:{color:"rgba(255,130,130)"}}}],z:10},{name:"full",type:"pictorialBar",symbolBoundingData:n||1,animationDuration:0,itemStyle:{normal:{color:"#ccc"}},z:10,data:[{itemStyle:{normal:{color:"rgba(105,204,230,0.40)"}},value:100,symbol:$[0]},{itemStyle:{normal:{color:"#1DA1F2"}},value:100,symbol:$[2],symbolSize:[8,"18%"],symbolOffset:[0,"-200%"]},{itemStyle:{normal:{color:"rgba(255,130,130,0.40)"}},value:100,symbol:$[1]}]}]}}}},I=(n("0efa"),n("cc36")),w=Object(v.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{class:e.$style.selection},[n("li",[n("h4",[e._v(e._s(e.title))]),n("div",{ref:"dom1",class:e.$style.dom1}),n("div",{class:e.$style.number},[n("p",[n("i",[e._v(e._s(e.$t("routerMenu.sex1")))]),n("span",[e._v(e._s(e.dataInfo[0]))])]),n("p",[n("i",[e._v(e._s(e.$t("routerMenu.sex2")))]),n("span",[e._v(e._s(e.dataInfo[1]))])])])])])}),[],!1,(function(e){this.$style=I.default.locals||I.default}),null,null).exports,x=n("5a0c"),O=n.n(x);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(o.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{name:"openMonitor",props:["userInfo"],data:function(){return{selectedPerson:null,isFullscreen:!1,fmoney:c.a,dayjs:O.a,devsInfo:[],status:{0:$t("routerMenu.no"),1:$t("routerMenu.allow"),2:$t("routerMenu.deny"),3:$t("routerMenu.unregistered")},sexRatio:{0:0,1:0},ageRatio:{"0_19":0,"20_29":0,"30_39":0,"40_49":0,"50_59":0,"60_69":0,"70_79":0},ws:{},verifyList:[],snapList:[],personInfo:{},outTime:40,mySetInterval:null,findByControlRecordRatioOutTime:30,nowDate:new Date,deviceIdsOnlieState:{},innerHeight:0}},components:{AgeRatio:h,MenWomen:w,Devs:b,iHeaderFullscreen:r.a},beforeDestroy:function(){clearInterval(this.mySetInterval),Object(l.a)(window,"resize",this.bodyOuterWidth),-1!==Object.keys(this.ws.__proto__).indexOf("close")&&(this.ws.close(),this.ws=function(){})},methods:{init:function(){this.findByControlRecordRatio()},findByControlRecordRatio:function(){var e=Object(a.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c.montiorCenterFindByControlRecordRatio({});case 2:(t=e.sent)&&t.data&&this.sortSexAndAgeData(t.data.sex||[],(t.data.age||[]).map((function(e){return e&&e.age||0})));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),deviceInfoFindAllPage:function(){var e=Object(a.a)(s.a.mark((function e(){var t,n=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.c.deviceInfoFindAllPage({pageNum:1,pageSize:1e3});case 2:t=e.sent,this.devsInfo=(t&&t.data&&t.data.list||[]).map((function(e){return e.heartBeat=n.outTime,n.getDeviceHasOnlineState(e.deviceId),e}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),sortSexAndAgeData:function(e,t){if(e.length?this.sexRatio={0:(e.find((function(e){return"0"==e.sex}))||{sexCount:0}).sexCount,1:(e.find((function(e){return"1"==e.sex}))||{sexCount:0}).sexCount}:this.sexRatio={0:0,1:0,2:0},t.length){var n=Object.assign({},this.ageRatio);Object.keys(this.ageRatio).forEach((function(e){var o=0;t.forEach((function(t){t>=+e.split("_")[0]&&t<=+e.split("_")[1]&&(o+=1)})),n[e]=o})),this.ageRatio=n}else{var o=Object.assign({},this.ageRatio);Object.keys(this.ageRatio).forEach((function(e){o[e]=0})),this.ageRatio=o}},handleCloseTag:function(){var e=this;this.$Modal.confirm({title:$t("routerMenu.quit"),content:$t("routerMenu.wantQuit"),onOk:function(){e.$emit("off")}})},bodyOuterWidth:function(){this.$refs.menWomen&&this.$refs.menWomen.resize(),this.$refs.ageRatio&&this.$refs.ageRatio.resize(),this.innerHeight=window.innerHeight},openWs:function(){var e=this,t=location.hostname;this.ws=new WebSocket("ws://"+t+":9002/api2/face/websocket/"+this.userInfo.taccount||!1),this.ws.onopen=function(e){},this.ws.onclose=function(e){},this.ws.onerror=function(){},this.ws.onmessage=function(t){if(t.data&&"string"==typeof t.data){var n=JSON.parse(t.data);"verify"===n.type?(e.devsInfo.forEach((function(e,t){e.deviceId===n.controlRecordVo.deviceId&&(n.controlRecordVo.localName=e.localName)})),e.verifyList.unshift(n.controlRecordVo),e.personInfo=n.controlRecordVo,e.verifyList.length>50&&(e.verifyList=e.verifyList.slice(0,50))):"snap"===n.type?(e.devsInfo.forEach((function(e,t){e.deviceId===n.controlRecordVo.deviceId&&(n.controlRecordVo.localName=e.localName)})),e.snapList.unshift(n.controlRecordVo),e.snapList.length>50&&(e.snapList=e.snapList.slice(0,50))):"heartBeat"===n.type&&n.hHeartBeatVo&&e.$set(e.deviceIdsOnlieState,n.hHeartBeatVo.DeviceID||n.hHeartBeatVo.deviceID,e.outTime)}}},personInfoChange:function(e){this.personInfo=e},openSetIntval:function(){var e=this;this.mySetInterval=setInterval((function(){for(var t in e.nowDate=new Date,e.findByControlRecordRatioOutTime--,e.findByControlRecordRatioOutTime<=0&&(e.findByControlRecordRatio(),e.findByControlRecordRatioOutTime=30),e.deviceIdsOnlieState)if(e.deviceIdsOnlieState.hasOwnProperty(t)){var n=e.deviceIdsOnlieState[t];+n>=0&&e.$set(e.deviceIdsOnlieState,t,n-1)}}),1e3)},getDeviceHasOnlineState:function(e){var t=this;d.c.montiorCenterGetDeviceState(e).then((function(n){n&&n.data&&n.data.deviceId&&t.$set(t.deviceIdsOnlieState,e,1==n.data.isLoad?t.outTime:0)}))},getStatusIcon:function(e){return{1:"md-checkmark-circle-outline",2:"md-close-circle",3:"md-warning"}[e]||"md-help"},getStatusText:function(e){return this.status[e+""]||this.$t("status.unknown")}},mounted:function(){var e=this;Object(l.b)(window,"resize",this.bodyOuterWidth),this.bodyOuterWidth(),this.$nextTick((function(){e.$refs.iHeaderFullscreen.toggleFullscreen()})),this.init(),this.deviceInfoFindAllPage(),this.openWs(),this.openSetIntval()}}),S=n("91b9");n("bf0b0"),n("4bfa");var k={props:["userInfo"],components:{XOpenedMonitor:Object(v.a)(C,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.monitor_center},[n("header",{class:e.$style.header},[n("div",{class:e.$style.datetime},[n("Icon",{attrs:{type:"md-time"}}),n("span",[e._v(e._s(e.dayjs(e.nowDate).format("YYYY-MM-DD HH:mm:ss")))])],1),n("div",{class:e.$style.title_section},[n("h1",[n("Icon",{class:e.$style.title_icon,attrs:{type:"md-eye"}}),n("span",[e._v(e._s(e.$t("routerMenu.faceIntelligent")))]),n("div",{class:e.$style.title_decoration})],1)]),n("div",{class:e.$style.controls},[n("i-header-fullscreen",{ref:"iHeaderFullscreen",class:e.$style.fullscreen_btn}),n("i-button",{class:e.$style.exit_btn,attrs:{type:"error",size:"default",icon:"md-power"},on:{click:e.handleCloseTag}},[e._v("\n        "+e._s(e.$t("routerMenu.quit"))+"\n      ")])],1)]),n("main",{class:e.$style.main_content},[n("Row",{class:e.$style.content_row,attrs:{gutter:24}},[n("Col",{staticClass:"col_box90",attrs:{span:"7"}},[n("section",{class:[e.$style.panel,e.$style.left_panel]},[n("div",{class:e.$style.panel_corners},e._l(4,(function(t){return n("span",{key:t,class:e.$style.corner})})),0),n("header",{class:e.$style.panel_header},[n("Icon",{attrs:{type:"md-person-add"}}),n("h3",[e._v(e._s(e.$t("routerMenu.unregisteredPersonnel")))]),n("div",{class:e.$style.header_line})],1),n("div",{class:e.$style.panel_content},[e.snapList.length?n("div",{class:e.$style.image_grid},[n("TransitionGroup",{class:e.$style.grid_container,attrs:{name:"fade",tag:"div"}},e._l(e.snapList,(function(t,o){return n("div",{key:"snap-"+t.controlTime+"-"+o,class:e.$style.image_card,style:{"animation-delay":.1*o+"s"}},[n("div",{class:e.$style.image_wrapper},[n("img",{attrs:{src:""+e.$faceApi.imgUrl+t.sceneAvatars,alt:e.$t("routerMenu.unregisteredPersonnel"),loading:"lazy"}}),n("div",{class:e.$style.image_overlay},[n("Icon",{attrs:{type:"md-warning"}})],1)]),n("div",{class:e.$style.card_info},[n("span",{class:e.$style.time},[e._v(e._s(e.dayjs(t.controlTime).format("HH:mm:ss")))]),n("span",{class:e.$style.location},[e._v(e._s(t.localName))])])])})),0)],1):n("div",{class:e.$style.empty_state},[n("Icon",{attrs:{type:"md-people",size:e.innerHeight>920?48:22}}),n("p",[e._v(e._s(e.$t("routerMenu.noDataText")))])],1)]),n("footer",{class:e.$style.panel_footer},[n("div",{class:e.$style.chart_container},[n("men-women",{ref:"menWomen",class:e.$style.gender_chart,attrs:{dataInfo:e.sexRatio}})],1)])])]),n("Col",{staticClass:"col_box90",attrs:{span:"10"}},[n("section",{class:[e.$style.panel,e.$style.center_panel]},[n("div",{class:e.$style.panel_corners},e._l(4,(function(t){return n("span",{key:t,class:e.$style.corner})})),0),n("div",{class:e.$style.main_display},[n("Transition",{attrs:{name:"person-info",mode:"out-in"}},[e.personInfo.name?n("div",{key:e.personInfo.name,class:e.$style.person_details},[n("div",{class:e.$style.person_image},[e._v("\n                "+e._s(e.personInfo)+"\n                "),n("img",{attrs:{src:""+e.$faceApi.imgUrl+e.personInfo.signAvatars,alt:e.personInfo.name}})]),n("div",{class:e.$style.person_info},[n("h2",{class:e.$style.person_name},[e._v(e._s(e.personInfo.name))]),n("div",{class:e.$style.info_grid},[n("div",{class:e.$style.info_item},[n("Icon",{attrs:{type:"md-card"}}),n("label",[e._v(e._s(e.$t("routerMenu.cardId")))]),n("span",[e._v(e._s(e.personInfo.cardId||e.$t("common.notAvailable")))])],1),n("div",{class:e.$style.info_item},[n("Icon",{attrs:{type:e.getStatusIcon(e.personInfo.status)}}),n("label",[e._v(e._s(e.$t("routerMenu.status")))]),n("span",[e._v(e._s(e.status[e.personInfo.status+""]))])],1),n("div",{class:e.$style.info_item},[n("Icon",{attrs:{type:"md-time"}}),n("label",[e._v(e._s(e.$t("routerMenu.controlTime")))]),n("span",[e._v(e._s(e.dayjs(e.personInfo.controlTime).format("YYYY-MM-DD HH:mm:ss")))])],1)]),n("div",{class:[e.$style.status_badge,e.$style["status_"+e.personInfo.status]]},[n("Icon",{class:e.$style.status_icon,attrs:{type:e.getStatusIcon(e.personInfo.status),size:e.innerHeight>920?44:32}}),n("span",[e._v(e._s(e.status[e.personInfo.status+""]))])],1)])]):n("div",{class:e.$style.no_person_selected},[n("Icon",{attrs:{type:"md-person",size:"80"}}),n("h3",[e._v(e._s(e.$t("routerMenu.personnelInformation")))]),n("p",[e._v(e._s(e.$t("routerMenu.noDataText")))])],1)])],1),n("footer",{class:e.$style.panel_footer},[n("div",{class:e.$style.device_status},[n("devs",{class:e.$style.devices_component,attrs:{devsInfo:e.devsInfo,deviceIdsOnlieState:e.deviceIdsOnlieState,innerHeight:e.innerHeight}})],1)])])]),n("Col",{staticClass:"col_box90",attrs:{span:"7"}},[n("section",{class:[e.$style.panel,e.$style.right_panel]},[n("div",{class:e.$style.panel_corners},e._l(4,(function(t){return n("span",{key:t,class:e.$style.corner})})),0),n("header",{class:e.$style.panel_header},[n("Icon",{attrs:{type:"md-people"}}),n("h3",[e._v(e._s(e.$t("routerMenu.registeredPersonnel")))]),n("div",{class:e.$style.header_line})],1),n("div",{class:e.$style.panel_content},[e.verifyList.length?n("div",{class:e.$style.verified_list},[n("TransitionGroup",{class:e.$style.list_container,attrs:{name:"list",tag:"div"}},e._l(e.verifyList,(function(t,o){var i;return n("div",{key:"verify-"+t.controlTime+"-"+t.name+"-"+o,class:[e.$style.verified_item,(i={},i[e.$style.selected]=e.personInfo.name===t.name,i)],style:{"animation-delay":.05*o+"s"},on:{click:function(n){return e.personInfoChange(t)}}},[n("div",{class:e.$style.verified_image},[n("img",{attrs:{src:""+e.$faceApi.imgUrl+t.sceneAvatars,alt:t.name,loading:"lazy"}}),n("div",{class:[e.$style.status_indicator,e.$style["status_"+t.status]]})]),n("div",{class:e.$style.verified_info},[n("div",{class:e.$style.info_row},[n("Icon",{attrs:{type:"md-desktop"}}),n("span",[e._v(e._s(t.localName))])],1),n("div",{class:e.$style.info_row},[n("Icon",{attrs:{type:"md-time"}}),n("span",[e._v(e._s(e.dayjs(t.controlTime).format("YYYY-MM-DD HH:mm")))])],1),n("div",{class:e.$style.info_row},[n("Icon",{attrs:{type:"md-person"}}),n("span",[e._v(e._s(t.name))])],1),n("div",{class:e.$style.info_row},[n("Icon",{attrs:{type:e.getStatusIcon(e.personInfo.status)}}),n("span",[e._v(e._s(e.status[e.personInfo.status+""]))])],1)])])})),0)],1):n("div",{class:e.$style.empty_state},[n("Icon",{attrs:{type:"md-people",size:"48"}}),n("p",[e._v(e._s(e.$t("routerMenu.noDataText")))])],1)]),n("footer",{class:e.$style.panel_footer},[n("div",{class:e.$style.chart_container},[n("age-ratio",{ref:"ageRatio",class:e.$style.age_chart,attrs:{dataInfo:e.ageRatio}})],1)])])])],1)],1)])}),[],!1,(function(e){this.$style=S.default.locals||S.default}),"4b2d545c",null).exports},data:function(){return{show:!1,searchForm:{pageNum:1,pageSize:1e3},columns:[{title:"ID",key:"id",align:"center",minWidth:100},{title:$t("routerMenu.deviceName"),key:"localName",align:"center",minWidth:160},{title:$t("routerMenu.deviceSerialNumber"),key:"deviceId",align:"center",minWidth:120},{title:$t("routerMenu.versionNumber"),key:"versionNum",align:"center",minWidth:120},{title:$t("routerMenu.ip"),key:"ipAddress",align:"center",minWidth:120},{title:$t("routerMenu.modificationTime"),key:"modifyTime",align:"center",sortable:!0,minWidth:170},{title:$t("routerMenu.modifier"),key:"modifyName",align:"center",minWidth:120},{title:$t("routerMenu.creationTime"),key:"createTime",sortable:!0,align:"center",minWidth:170},{title:$t("routerMenu.creater"),key:"createName",align:"center",minWidth:120}],data:[]}},mounted:function(){this.deviceInfoFindAllPage()},methods:{deviceInfoFindAllPage:function(){var e=this;d.c.deviceInfoFindAllPage(this.searchForm).then((function(t){t&&t.data&&(e.data=t.data.list||[])}))}}},R=Object(v.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"i-table-no-border selection"},[n("div",{staticClass:"pageHeader"},[n("h4",[e._v(e._s(e.$t("routerMenu.monitorCenter")))]),n("div",{staticClass:"buttons"})]),n("Card",{staticClass:"ivu-mt",staticStyle:{height:"300px"},attrs:{bordered:!1,"dis-hover":""}},[n("Table",{ref:"table",attrs:{loading:e.$store.state.loading,height:e.data.length>=11?520:"",columns:e.columns,data:e.data,sortable:"custom"}}),n("Button",{staticClass:"ivu-mt",attrs:{type:"info",size:"large"},on:{click:function(t){e.show=!0}}},[e._v(e._s(e.$t("routerMenu.openMonitoringCenter")))])],1),e.show?n("x-opened-monitor",{attrs:{userInfo:e.userInfo},on:{off:function(t){e.show=!1}}}):e._e()],1)}),[],!1,null,"8f6463d8",null);t.default=R.exports}}]);