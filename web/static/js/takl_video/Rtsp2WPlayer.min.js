let __R2WVIDEOIDX=0,__R2WVIDEOLOGENABLED=!0;function Rtsp2WPlayer(e){if(this.onconnectionstatechange=null,this.style={style:"object-fit:fill;display: block;width: 100%;height: 100%;",autoplay:!0,controls:!1,controlsList:"nodownload",muted:!0,mode:"scaleToFill","x5-video-player-fullscreen":"true","x5-video-player-type":"h5","x5-playsinline":!0,preload:"auto",playsinline:"true","webkit-playsinline":"true",poster:"data:image/gif;base64,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"},!e)throw new Error("缺少参数!");if(e.onconnectionstatechange&&(this.onconnectionstatechange=e.onconnectionstatechange),e.style)for(const t in e.style)this.style[t]=e.style[t];void 0!==e.logEnabled&&(__R2WVIDEOLOGENABLED=e.logEnabled),this.serverPath=e.serverPath||"http://localhost:8083",this.containerId=e.containerId||function(){throw new Error("缺少参数：containerId")}(),this.videoId="v"+(new Date).getTime()+"_"+ ++__R2WVIDEOIDX}Rtsp2WPlayer.Log=function(e,t){if(__R2WVIDEOLOGENABLED){var o="["+Rtsp2WPlayer.FormatDate(new Date,"yyyy-MM-dd hh:mm:ss")+"] [QY Rtsp2WPlayer] "+e;t?console.log(o,t):console.log(o)}},Rtsp2WPlayer.Ajax=function(e,t,o,n,i,s,A){void 0===s&&(s=!0);let h=new XMLHttpRequest;if(s&&(h.timeout=1e4),h.onreadystatechange=function(){let e=h.readyState,t=h.status;if(200===t)4===e&&n(JSON.parse(h.responseText),A);else if(t>=400&&t<=505){let e=t;h.responseText&&(e+=":"+h.responseText),i(e,A)}else if(0==t&&4==e){let e=t;h.responseText&&(e+=":"+h.responseText),i(e,A)}},"get"===e)o&&(t+="?",t+=o),h.open(e,t,s),h.send();else if(h.open(e,t,s),h.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset=UTF-8"),o){let e=Object.keys(o).map((e=>e+"="+o[e])).join("&");h.send(e)}else h.send()},Rtsp2WPlayer.FormatDate=function(e,t){var o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?o[n]:("00"+o[n]).substr((""+o[n]).length)));return t},Rtsp2WPlayer.AppendHTML=function(e,t){let o=document.createElement("div");o.innerHTML=t;let n=o.childNodes,i=document.createDocumentFragment();for(var s=0,A=n.length;s<A;s+=1)i.appendChild(n[s].cloneNode(!0));e.appendChild(i),n=null,i=null},Rtsp2WPlayer.prototype.createVideo=function(){if(this.video=document.getElementById(this.videoId),this.video)Rtsp2WPlayer.Log("exist:%s",this.videoId);else{let e=document.getElementById(this.containerId);if(null==e)return console.error("未找到视频容器："+this.containerId),null;let t=[];t.push('<video id="'+this.videoId+'"');for(const e in this.style){let o=this.style[e];"boolean"==typeof o?o&&t.push(e):t.push(e+'="'+this.style[e]+'"')}this.style.poster,t.push("/>"),Rtsp2WPlayer.AppendHTML(e,t.join(" ")),this.video=document.getElementById(this.videoId)}if(null==this.video){let e="在容器'"+this.containerId+"'中创建视频组件失败!";throw console.error(e),new Error(e)}this.stream=new MediaStream,this.connection=new RTCPeerConnection({}),this.connection.ontrack=function(e){Rtsp2WPlayer.Log("ontrack"),this.stream.addTrack(e.track),this.video.srcObject=this.stream}.bind(this),this.connection.onnegotiationneeded=async function(e){Rtsp2WPlayer.Log("onnegotiationneeded");let t=await this.connection.createOffer();await this.connection.setLocalDescription(t),null!=this.rtspUrl&&this._play()}.bind(this),this.connection.onconnectionstatechange=function(e){Rtsp2WPlayer.Log("onconnectionstatechange"),this.onconnectionstatechange&&this.onconnectionstatechange(this.connection.connectionState)}.bind(this),this.connection.addTransceiver("video",{direction:"sendrecv"})},Rtsp2WPlayer.prototype.replay=function(){this.rtspUrl?this.play(this.rtspUrl):console.warn("重新播放失败，rtspUrl未提供!")},Rtsp2WPlayer.prototype.play=function(e){this.destroy(),this.rtspUrl=e,Rtsp2WPlayer.Log(this.rtspUrl),this.createVideo(this.videoId)},Rtsp2WPlayer.prototype._play=function(){let e=this.connection.localDescription.sdp,t=this.serverPath+"/stream";Rtsp2WPlayer.Ajax("post",t,{url:this.rtspUrl,sdp64:btoa(e)},function(e){let t=e.sdp64;try{let e=window.atob(t);this.connection.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:e}))}catch(e){console.warn(e)}}.bind(this),function(e){this.destroy(),this.onconnectionstatechange&&this.onconnectionstatechange("failed")}.bind(this),this)},Rtsp2WPlayer.prototype.getVideoId=function(){return this.videoId},Rtsp2WPlayer.prototype.getVideo=function(){return this.video},Rtsp2WPlayer.prototype.destroy=function(){if(this.rtspUrl=null,this.connection)try{this.connection.close(),this.connection=null}catch(e){console.error(e)}if(this.video)try{let e=document.getElementById(this.containerId);null!=e&&e.removeChild(this.video),this.video=null}catch(e){console.error(e)}Rtsp2WPlayer.Log("destroy!")};